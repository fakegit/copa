
<!DOCTYPE html>
<html lang="en" itemscope itemtype="http://schema.org/Article">
 <head>
  <title>API Document</title>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="https://docs.konghq.com/assets/styles.css" />
  <style>
    .main-content {
      padding: 0 50px;
    }
    .content {
      padding: 20px;
    }

  </style>

</head>

<body>

  <div class="main-content">

    <div class="page-content">
      <div class="content show-anchor-links">
        <h2>API Document</h2>

        <ul>
          <li><a href="#supported-content-types" class="scroll-to">Supported Content Types</a></li>
          <li><a href="#certificate-object" class="scroll-to">Certificate Object</a>
            <ul>
              <li><a href="#add-certificate" class="scroll-to">Add Certificate</a></li>
              <li><a href="#list-certificates" class="scroll-to">List Certificates</a></li>
              <li><a href="#retrieve-certificate" class="scroll-to">Retrieve Certificate</a></li>
              <li><a href="#update-certificate" class="scroll-to">Update Certificate</a></li>
              <li><a href="#update-or-create-certificate" class="scroll-to">Update Or Create Certificate</a></li>
              <li><a href="#delete-certificate" class="scroll-to">Delete Certificate</a></li>
            </ul>
          </li>
        </ul>

        <div class="alert alert-info.blue" role="alert">
          This page refers to the Admin API for running Kong
          This page refers to the Admin API for running Kong
          This page refers to the Admin API for running Kong
          This page refers to the Admin API for running Kong
          This page refers to the Admin API for running Kong
          This page refers to the Admin API for running Kong
          This page refers to the Admin API for running Kong
        </div>

        <p>Kong comes with an <strong>internal</strong> RESTful Admin API for administration purposes.
        Requests to the Admin API can be sent to any node in the cluster, and Kong will
        keep the configuration consistent across all nodes.</p>

        <ul>
          <li><code>8001</code> is the default port on which the Admin API listens.</li>
          <li><code>8444</code> is the default port for HTTPS traffic to the Admin API.</li>
        </ul>


        <p>Arrays and sets can be specified in various ways:</p>

        <ol>
          <li>
            Sending same parameter multiple times:
            <pre><code>print(123)</code></pre>
          </li>
          <li>
            <pre><code>print(123)</code></pre>
            <pre><code>print(123)</code></pre>
            <pre><code>print(123)</code></pre>
          </li>
        </ol>


        <pre><code>{
    "config": {
        "limit": 10,
        "period": "seconds",
        "hosts": [ "example.com", "example.org" ]
    }
}</code></pre>


        <hr>

        <h2 id="information-routes">Information Routes</h2>

        <h3 id="retrieve-node-information">Retrieve Node Information</h3>

        <p>Retrieve generic details about a node.</p>

        <div class="endpoint get">/</div>

        <p><em>Response</em></p>

        <pre><code>HTTP 200 OK</code></pre>

        <pre><code>{
    "hostname": "",
    "node_id": "6a72192c-a3a1-4c8d-95c6-efabae9fb969",
    "lua_version": "LuaJIT 2.1.0-beta3",
    "plugins": {
        "available_on_server": [
            ...
        ],
        "enabled_in_cluster": [
            ...
        ]
    },
    "configuration" : {
        ...
    },
    "tagline": "Welcome to Kong",
    "version": "0.14.0"
}</code></pre>

        <ul>
          <li><code>node_id</code>: A UUID representing the running Kong node. This UUID
        is randomly generated when Kong starts, so the node will have a
        different <code>node_id</code> each time it is restarted.</li>
          <li><code>available_on_server</code>: Names of plugins that are installed on the node.</li>
          <li><code>enabled_in_cluster</code>: Names of plugins that are enabled/configured.
        That is, the plugins configurations currently in the datastore shared
        by all Kong nodes.</li>
        </ul>

        <hr>


        <h3 id="add-service">Add Service</h3>
        <h5 id="create-service">Create Service</h5>

        <div class="endpoint post">/services</div>

        <p><em>Request Body</em></p>

        <table>
          <thead>
            <tr>
              <th style="text-align: right">Attributes</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td style="text-align: right"><code>name</code><br><em>optional</em></td>
              <td>The Service name.</td>
            </tr>
            <tr>
              <td style="text-align: right"><code>retries</code><br><em>optional</em></td>
              <td>The number of retries to execute upon failure to proxy. Defaults to <code>5</code>.</td>
            </tr>
            <tr>
              <td style="text-align: right"><code>protocol</code></td>
              <td>The protocol used to communicate with the upstream. It can be one of <code>http</code> or <code>https</code>.  Defaults to <code>"http"</code>.</td>
            </tr>
            <tr>
              <td style="text-align: right"><code>host</code></td>
              <td>The host of the upstream server.</td>
            </tr>
            <tr>
              <td style="text-align: right"><code>port</code></td>
              <td>The upstream server port. Defaults to <code>80</code>.</td>
            </tr>
          </tbody>
        </table>

        <p><em>Response</em></p>

        <div><div><pre><code>HTTP 201 Created</code></pre></div></div>

        <pre><code>{
    "id": "9748f662-7711-4a90-8186-dc02f10eb0f5",
    "created_at": 1422386534,
    "updated_at": 1422386534,
    "name": "my-service",
    "retries": 5,
    "protocol": "http",
    "host": "example.com",
    "port": 80,
    "path": "/some_api",
    "connect_timeout": 60000,
    "write_timeout": 60000,
    "read_timeout": 60000,
    "tags": ["user-level", "low-priority"]
}</code></pre>


        <hr>

        <h3 id="retrieve-service">Retrieve Service</h3>
        <h5 id="retrieve-service-1">Retrieve Service</h5>

        <div class="endpoint get">/services/{id}</div>

        <table>
          <thead>
            <tr>
              <th style="text-align: right">Attributes</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td style="text-align: right"><code>name or id</code><br><strong>required</strong></td>
              <td>The unique identifier <strong>or</strong> the name of the Service to retrieve.</td>
            </tr>
          </tbody>
        </table>




        <p><em>Response</em></p>

        <pre><code>HTTP 200 OK</code></pre>

        <pre>{
    "id": "9748f662-7711-4a90-8186-dc02f10eb0f5",
    "created_at": 1422386534,
    "updated_at": 1422386534,
    "name": "my-service",
    "retries": 5,
    "protocol": "http",
    "host": "example.com",
    "port": 80,
    "path": "/some_api",
    "connect_timeout": 60000,
    "write_timeout": 60000,
    "read_timeout": 60000,
    "tags": ["user-level", "low-priority"]
}</pre>

<hr>

<h3 id="update-service"><a class="header-link" href="#update-service" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Update Service</h3>

<h5 id="update-service-1"><a class="header-link" href="#update-service-1" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Update Service</h5>

<div class="endpoint patch">/services/{name or id}</div>

<table>
  <thead>
    <tr>
      <th style="text-align: right">Attributes</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right"><code>name or id</code><br><strong>required</strong></td>
      <td>The unique identifier <strong>or</strong> the name of the Service to update.</td>
    </tr>
  </tbody>
</table>

<h5 id="update-service-associated-to-a-specific-route"><a class="header-link" href="#update-service-associated-to-a-specific-route" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Update Service Associated to a Specific Route</h5>

<div class="endpoint patch">/routes/{route name or id}/service</div>

<table>
  <thead>
    <tr>
      <th style="text-align: right">Attributes</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right"><code>route name or id</code><br><strong>required</strong></td>
      <td>The unique identifier <strong>or</strong> the name of the Route associated to the Service to be updated.</td>
    </tr>
  </tbody>
</table>

<h5 id="update-service-associated-to-a-specific-plugin"><a class="header-link" href="#update-service-associated-to-a-specific-plugin" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Update Service Associated to a Specific Plugin</h5>

<div class="endpoint patch">/plugins/{plugin id}/service</div>

<table>
  <thead>
    <tr>
      <th style="text-align: right">Attributes</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right"><code>plugin id</code><br><strong>required</strong></td>
      <td>The unique identifier of the Plugin associated to the Service to be updated.</td>
    </tr>
  </tbody>
</table>

<p><em>Request Body</em></p>

<table>
  <thead>
    <tr>
      <th style="text-align: right">Attributes</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right"><code>name</code><br><em>optional</em></td>
      <td>The Service name.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>retries</code><br><em>optional</em></td>
      <td>The number of retries to execute upon failure to proxy. Defaults to <code>5</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>protocol</code></td>
      <td>The protocol used to communicate with the upstream. It can be one of <code>http</code> or <code>https</code>.  Defaults to <code>"http"</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>host</code></td>
      <td>The host of the upstream server.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>port</code></td>
      <td>The upstream server port. Defaults to <code>80</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>path</code><br><em>optional</em></td>
      <td>The path to be used in requests to the upstream server.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>connect_timeout</code><br><em>optional</em></td>
      <td>The timeout in milliseconds for establishing a connection to the upstream server.  Defaults to <code>60000</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>write_timeout</code><br><em>optional</em></td>
      <td>The timeout in milliseconds between two successive write operations for transmitting a request to the upstream server.  Defaults to <code>60000</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>read_timeout</code><br><em>optional</em></td>
      <td>The timeout in milliseconds between two successive read operations for transmitting a request to the upstream server.  Defaults to <code>60000</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>tags</code><br><em>optional</em></td>
      <td>An optional set of strings associated with the Service, for grouping and filtering.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>url</code><br><em>shorthand-attribute</em></td>
      <td>Shorthand attribute to set <code>protocol</code>, <code>host</code>, <code>port</code> and <code>path</code> at once. This attribute is write-only (the Admin API never “returns” the url).</td>
    </tr>
  </tbody>
</table>

<p><em>Response</em></p>

<div><div><pre><code>HTTP 200 OK
</code></pre></div></div>

<div><div><pre><code><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9748f662-7711-4a90-8186-dc02f10eb0f5"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1422386534</span><span class="p">,</span><span class="w">
    </span><span class="s2">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1422386534</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my-service"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"retries"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
    </span><span class="s2">"protocol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"host"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example.com"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"port"</span><span class="p">:</span><span class="w"> </span><span class="mi">80</span><span class="p">,</span><span class="w">
    </span><span class="s2">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/some_api"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"connect_timeout"</span><span class="p">:</span><span class="w"> </span><span class="mi">60000</span><span class="p">,</span><span class="w">
    </span><span class="s2">"write_timeout"</span><span class="p">:</span><span class="w"> </span><span class="mi">60000</span><span class="p">,</span><span class="w">
    </span><span class="s2">"read_timeout"</span><span class="p">:</span><span class="w"> </span><span class="mi">60000</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"user-level"</span><span class="p">,</span><span class="w"> </span><span class="s2">"low-priority"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div></div>

<hr>

<h3 id="update-or-create-service"><a class="header-link" href="#update-or-create-service" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Update Or Create Service</h3>

<h5 id="create-or-update-service"><a class="header-link" href="#create-or-update-service" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Create Or Update Service</h5>

<div class="endpoint put">/services/{name or id}</div>

<table>
  <thead>
    <tr>
      <th style="text-align: right">Attributes</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right"><code>name or id</code><br><strong>required</strong></td>
      <td>The unique identifier <strong>or</strong> the name of the Service to create or update.</td>
    </tr>
  </tbody>
</table>

<h5 id="create-or-update-service-associated-to-a-specific-route"><a class="header-link" href="#create-or-update-service-associated-to-a-specific-route" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Create Or Update Service Associated to a Specific Route</h5>

<div class="endpoint put">/routes/{route name or id}/service</div>

<table>
  <thead>
    <tr>
      <th style="text-align: right">Attributes</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right"><code>route name or id</code><br><strong>required</strong></td>
      <td>The unique identifier <strong>or</strong> the name of the Route associated to the Service to be created or updated.</td>
    </tr>
  </tbody>
</table>

<h5 id="create-or-update-service-associated-to-a-specific-plugin"><a class="header-link" href="#create-or-update-service-associated-to-a-specific-plugin" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Create Or Update Service Associated to a Specific Plugin</h5>

<div class="endpoint put">/plugins/{plugin id}/service</div>

<table>
  <thead>
    <tr>
      <th style="text-align: right">Attributes</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right"><code>plugin id</code><br><strong>required</strong></td>
      <td>The unique identifier of the Plugin associated to the Service to be created or updated.</td>
    </tr>
  </tbody>
</table>

<p><em>Request Body</em></p>

<table>
  <thead>
    <tr>
      <th style="text-align: right">Attributes</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right"><code>name</code><br><em>optional</em></td>
      <td>The Service name.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>retries</code><br><em>optional</em></td>
      <td>The number of retries to execute upon failure to proxy. Defaults to <code>5</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>protocol</code></td>
      <td>The protocol used to communicate with the upstream. It can be one of <code>http</code> or <code>https</code>.  Defaults to <code>"http"</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>host</code></td>
      <td>The host of the upstream server.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>port</code></td>
      <td>The upstream server port. Defaults to <code>80</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>path</code><br><em>optional</em></td>
      <td>The path to be used in requests to the upstream server.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>connect_timeout</code><br><em>optional</em></td>
      <td>The timeout in milliseconds for establishing a connection to the upstream server.  Defaults to <code>60000</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>write_timeout</code><br><em>optional</em></td>
      <td>The timeout in milliseconds between two successive write operations for transmitting a request to the upstream server.  Defaults to <code>60000</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>read_timeout</code><br><em>optional</em></td>
      <td>The timeout in milliseconds between two successive read operations for transmitting a request to the upstream server.  Defaults to <code>60000</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>tags</code><br><em>optional</em></td>
      <td>An optional set of strings associated with the Service, for grouping and filtering.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>url</code><br><em>shorthand-attribute</em></td>
      <td>Shorthand attribute to set <code>protocol</code>, <code>host</code>, <code>port</code> and <code>path</code> at once. This attribute is write-only (the Admin API never “returns” the url).</td>
    </tr>
  </tbody>
</table>

<p>Inserts (or replaces) the Service under the requested resource with the
definition specified in the body. The Service will be identified via the <code>name
or id</code> attribute.</p>

<p>When the <code>name or id</code> attribute has the structure of a UUID, the Service being
inserted/replaced will be identified by its <code>id</code>. Otherwise it will be
identified by its <code>name</code>.</p>

<p>When creating a new Service without specifying <code>id</code> (neither in the URL nor in
the body), then it will be auto-generated.</p>

<p>Notice that specifying a <code>name</code> in the URL and a different one in the request
body is not allowed.</p>

<p><em>Response</em></p>

<div><div><pre><code>HTTP 201 Created or HTTP 200 OK
</code></pre></div></div>

<p>See POST and PATCH responses.</p>

<hr>

<h3 id="delete-service"><a class="header-link" href="#delete-service" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Delete Service</h3>

<h5 id="delete-service-1"><a class="header-link" href="#delete-service-1" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Delete Service</h5>

<div class="endpoint delete">/services/{name or id}</div>

<table>
  <thead>
    <tr>
      <th style="text-align: right">Attributes</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right"><code>name or id</code><br><strong>required</strong></td>
      <td>The unique identifier <strong>or</strong> the name of the Service to delete.</td>
    </tr>
  </tbody>
</table>

<h5 id="delete-service-associated-to-a-specific-route"><a class="header-link" href="#delete-service-associated-to-a-specific-route" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Delete Service Associated to a Specific Route</h5>

<div class="endpoint delete">/routes/{route name or id}/service</div>

<table>
  <thead>
    <tr>
      <th style="text-align: right">Attributes</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right"><code>route name or id</code><br><strong>required</strong></td>
      <td>The unique identifier <strong>or</strong> the name of the Route associated to the Service to be deleted.</td>
    </tr>
  </tbody>
</table>

<p><em>Response</em></p>

<div><div><pre><code>HTTP 204 No Content
</code></pre></div></div>

<hr>

<h2 id="route-object"><a class="header-link" href="#route-object" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Route Object</h2>

<p>Route entities define rules to match client requests. Each Route is
associated with a Service, and a Service may have multiple Routes associated to
it. Every request matching a given Route will be proxied to its associated
Service.</p>

<p>The combination of Routes and Services (and the separation of concerns between
them) offers a powerful routing mechanism with which it is possible to define
fine-grained entry-points in Kong leading to different upstream services of
your infrastructure.</p>

<p>Routes can be both <a href="#tags">tagged and filtered by tags</a>.</p>

<div><div><pre><code><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"51e77dc2-8f3e-4afa-9d0e-0e3bbbcfd515"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1422386534</span><span class="p">,</span><span class="w">
    </span><span class="s2">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1422386534</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my-route"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"protocols"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"http"</span><span class="p">,</span><span class="w"> </span><span class="s2">"https"</span><span class="p">],</span><span class="w">
    </span><span class="s2">"methods"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"GET"</span><span class="p">,</span><span class="w"> </span><span class="s2">"POST"</span><span class="p">],</span><span class="w">
    </span><span class="s2">"hosts"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"example.com"</span><span class="p">,</span><span class="w"> </span><span class="s2">"foo.test"</span><span class="p">],</span><span class="w">
    </span><span class="s2">"paths"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"/foo"</span><span class="p">,</span><span class="w"> </span><span class="s2">"/bar"</span><span class="p">],</span><span class="w">
    </span><span class="s2">"https_redirect_status_code"</span><span class="p">:</span><span class="w"> </span><span class="mi">426</span><span class="p">,</span><span class="w">
    </span><span class="s2">"regex_priority"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"strip_path"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"preserve_host"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"user-level"</span><span class="p">,</span><span class="w"> </span><span class="s2">"low-priority"</span><span class="p">],</span><span class="w">
    </span><span class="s2">"service"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"id"</span><span class="p">:</span><span class="s2">"fc73f2af-890d-4f9b-8363-af8945001f7f"</span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div></div>

<h3 id="add-route"><a class="header-link" href="#add-route" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Add Route</h3>

<h5 id="create-route"><a class="header-link" href="#create-route" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Create Route</h5>

<div class="endpoint post">/routes</div>

<h5 id="create-route-associated-to-a-specific-service"><a class="header-link" href="#create-route-associated-to-a-specific-service" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Create Route Associated to a Specific Service</h5>

<div class="endpoint post">/services/{service name or id}/routes</div>

<table>
  <thead>
    <tr>
      <th style="text-align: right">Attributes</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right"><code>service name or id</code><br><strong>required</strong></td>
      <td>The unique identifier or the <code>name</code> attribute of the Service that should be associated to the newly-created Route.</td>
    </tr>
  </tbody>
</table>

<p><em>Request Body</em></p>

<table>
  <thead>
    <tr>
      <th style="text-align: right">Attributes</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right"><code>name</code><br><em>optional</em></td>
      <td>The name of the Route.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>protocols</code></td>
      <td>A list of the protocols this Route should allow. When set to <code>["https"]</code>, HTTP requests are answered with a request to upgrade to HTTPS.  Defaults to <code>["http", "https"]</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>methods</code><br><em>semi-optional</em></td>
      <td>A list of HTTP methods that match this Route. When using <code>http</code> or <code>https</code> protocols, at least one of <code>hosts</code>, <code>paths</code>, or <code>methods</code> must be set.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>hosts</code><br><em>semi-optional</em></td>
      <td>A list of domain names that match this Route. When using <code>http</code> or <code>https</code> protocols, at least one of <code>hosts</code>, <code>paths</code>, or <code>methods</code> must be set.  With form-encoded, the notation is <code>hosts[]=example.com&amp;hosts[]=foo.test</code>. With JSON, use an Array.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>paths</code><br><em>semi-optional</em></td>
      <td>A list of paths that match this Route. When using <code>http</code> or <code>https</code> protocols, at least one of <code>hosts</code>, <code>paths</code>, or <code>methods</code> must be set.  With form-encoded, the notation is <code>paths[]=/foo&amp;paths[]=/bar</code>. With JSON, use an Array.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>https_redirect_status_code</code></td>
      <td>The status code Kong responds with when all properties of a Route match except the protocol i.e. if the protocol of the request is <code>HTTP</code> instead of <code>HTTPS</code>. <code>Location</code> header is injected by Kong if the field is set to 301, 302, 307 or 308.  Defaults to <code>426</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>regex_priority</code><br><em>optional</em></td>
      <td>A number used to choose which route resolves a given request when several routes match it using regexes simultaneously. When two routes match the path and have the same <code>regex_priority</code>, the older one (lowest <code>created_at</code>) is used. Note that the priority for non-regex routes is different (longer non-regex routes are matched before shorter ones).  Defaults to <code>0</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>strip_path</code><br><em>optional</em></td>
      <td>When matching a Route via one of the <code>paths</code>, strip the matching prefix from the upstream request URL.  Defaults to <code>true</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>preserve_host</code><br><em>optional</em></td>
      <td>When matching a Route via one of the <code>hosts</code> domain names, use the request <code>Host</code> header in the upstream request headers. If set to <code>false</code>, the upstream <code>Host</code> header will be that of the Service’s <code>host</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>snis</code><br><em>semi-optional</em></td>
      <td>A list of SNIs that match this Route when using stream routing. When using <code>tcp</code> or <code>tls</code> protocols, at least one of <code>snis</code>, <code>sources</code>, or <code>destinations</code> must be set.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>sources</code><br><em>semi-optional</em></td>
      <td>A list of IP sources of incoming connections that match this Route when using stream routing. Each entry is an object with fields “ip” (optionally in CIDR range notation) and/or “port”. When using <code>tcp</code> or <code>tls</code> protocols, at least one of <code>snis</code>, <code>sources</code>, or <code>destinations</code> must be set.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>destinations</code><br><em>semi-optional</em></td>
      <td>A list of IP destinations of incoming connections that match this Route when using stream routing. Each entry is an object with fields “ip” (optionally in CIDR range notation) and/or “port”. When using <code>tcp</code> or <code>tls</code> protocols, at least one of <code>snis</code>, <code>sources</code>, or <code>destinations</code> must be set.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>tags</code><br><em>optional</em></td>
      <td>An optional set of strings associated with the Route, for grouping and filtering.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>service</code><br><em>optional</em></td>
      <td>The Service this Route is associated to. This is where the Route proxies traffic to.  With form-encoded, the notation is <code>service.id=&lt;service_id&gt;</code>. With JSON, use <code>"service":{"id":"&lt;service_id&gt;"}</code>.</td>
    </tr>
  </tbody>
</table>

<p><em>Response</em></p>

<div><div><pre><code>HTTP 201 Created
</code></pre></div></div>

<div><div><pre><code><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"51e77dc2-8f3e-4afa-9d0e-0e3bbbcfd515"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1422386534</span><span class="p">,</span><span class="w">
    </span><span class="s2">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1422386534</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my-route"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"protocols"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"http"</span><span class="p">,</span><span class="w"> </span><span class="s2">"https"</span><span class="p">],</span><span class="w">
    </span><span class="s2">"methods"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"GET"</span><span class="p">,</span><span class="w"> </span><span class="s2">"POST"</span><span class="p">],</span><span class="w">
    </span><span class="s2">"hosts"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"example.com"</span><span class="p">,</span><span class="w"> </span><span class="s2">"foo.test"</span><span class="p">],</span><span class="w">
    </span><span class="s2">"paths"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"/foo"</span><span class="p">,</span><span class="w"> </span><span class="s2">"/bar"</span><span class="p">],</span><span class="w">
    </span><span class="s2">"https_redirect_status_code"</span><span class="p">:</span><span class="w"> </span><span class="mi">426</span><span class="p">,</span><span class="w">
    </span><span class="s2">"regex_priority"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"strip_path"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"preserve_host"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"user-level"</span><span class="p">,</span><span class="w"> </span><span class="s2">"low-priority"</span><span class="p">],</span><span class="w">
    </span><span class="s2">"service"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"id"</span><span class="p">:</span><span class="s2">"fc73f2af-890d-4f9b-8363-af8945001f7f"</span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div></div>

<hr>

<h3 id="list-routes"><a class="header-link" href="#list-routes" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>List Routes</h3>

<h5 id="list-all-routes"><a class="header-link" href="#list-all-routes" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>List All Routes</h5>

<div class="endpoint get">/routes</div>

<h5 id="list-routes-associated-to-a-specific-service"><a class="header-link" href="#list-routes-associated-to-a-specific-service" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>List Routes Associated to a Specific Service</h5>

<div class="endpoint get">/services/{service name or id}/routes</div>

<table>
  <thead>
    <tr>
      <th style="text-align: right">Attributes</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right"><code>service name or id</code><br><strong>required</strong></td>
      <td>The unique identifier or the <code>name</code> attribute of the Service whose Routes are to be retrieved. When using this endpoint, only Routes associated to the specified Service will be listed.</td>
    </tr>
  </tbody>
</table>

<p><em>Response</em></p>

<div><div><pre><code>HTTP 200 OK
</code></pre></div></div>

<div><div><pre><code><span class="p">{</span><span class="w">
</span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4506673d-c825-444c-a25b-602e3c2ec16e"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1422386534</span><span class="p">,</span><span class="w">
    </span><span class="s2">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1422386534</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my-route"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"protocols"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"http"</span><span class="p">,</span><span class="w"> </span><span class="s2">"https"</span><span class="p">],</span><span class="w">
    </span><span class="s2">"methods"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"GET"</span><span class="p">,</span><span class="w"> </span><span class="s2">"POST"</span><span class="p">],</span><span class="w">
    </span><span class="s2">"hosts"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"example.com"</span><span class="p">,</span><span class="w"> </span><span class="s2">"foo.test"</span><span class="p">],</span><span class="w">
    </span><span class="s2">"paths"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"/foo"</span><span class="p">,</span><span class="w"> </span><span class="s2">"/bar"</span><span class="p">],</span><span class="w">
    </span><span class="s2">"https_redirect_status_code"</span><span class="p">:</span><span class="w"> </span><span class="mi">426</span><span class="p">,</span><span class="w">
    </span><span class="s2">"regex_priority"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"strip_path"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"preserve_host"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"user-level"</span><span class="p">,</span><span class="w"> </span><span class="s2">"low-priority"</span><span class="p">],</span><span class="w">
    </span><span class="s2">"service"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"id"</span><span class="p">:</span><span class="s2">"d35165e2-d03e-461a-bdeb-dad0a112abfe"</span><span class="p">}</span><span class="w">
</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"af8330d3-dbdc-48bd-b1be-55b98608834b"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1422386534</span><span class="p">,</span><span class="w">
    </span><span class="s2">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1422386534</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my-route"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"protocols"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"tcp"</span><span class="p">,</span><span class="w"> </span><span class="s2">"tls"</span><span class="p">],</span><span class="w">
    </span><span class="s2">"https_redirect_status_code"</span><span class="p">:</span><span class="w"> </span><span class="mi">426</span><span class="p">,</span><span class="w">
    </span><span class="s2">"regex_priority"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"strip_path"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"preserve_host"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"snis"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"foo.test"</span><span class="p">,</span><span class="w"> </span><span class="s2">"example.com"</span><span class="p">],</span><span class="w">
    </span><span class="s2">"sources"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="s2">"ip"</span><span class="p">:</span><span class="s2">"10.1.0.0/16"</span><span class="p">,</span><span class="w"> </span><span class="s2">"port"</span><span class="p">:</span><span class="mi">1234</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="s2">"ip"</span><span class="p">:</span><span class="s2">"10.2.2.2"</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="s2">"port"</span><span class="p">:</span><span class="mi">9123</span><span class="p">}],</span><span class="w">
    </span><span class="s2">"destinations"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="s2">"ip"</span><span class="p">:</span><span class="s2">"10.1.0.0/16"</span><span class="p">,</span><span class="w"> </span><span class="s2">"port"</span><span class="p">:</span><span class="mi">1234</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="s2">"ip"</span><span class="p">:</span><span class="s2">"10.2.2.2"</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="s2">"port"</span><span class="p">:</span><span class="mi">9123</span><span class="p">}],</span><span class="w">
    </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"admin"</span><span class="p">,</span><span class="w"> </span><span class="s2">"high-priority"</span><span class="p">,</span><span class="w"> </span><span class="s2">"critical"</span><span class="p">],</span><span class="w">
    </span><span class="s2">"service"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"id"</span><span class="p">:</span><span class="s2">"a9daa3ba-8186-4a0d-96e8-00d80ce7240b"</span><span class="p">}</span><span class="w">
</span><span class="p">}],</span><span class="w">

    </span><span class="s2">"next"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://localhost:8001/routes?offset=6378122c-a0a1-438d-a5c6-efabae9fb969"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<hr>

<h3 id="retrieve-route"><a class="header-link" href="#retrieve-route" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Retrieve Route</h3>

<h5 id="retrieve-route-1"><a class="header-link" href="#retrieve-route-1" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Retrieve Route</h5>

<div class="endpoint get">/routes/{name or id}</div>

<table>
  <thead>
    <tr>
      <th style="text-align: right">Attributes</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right"><code>name or id</code><br><strong>required</strong></td>
      <td>The unique identifier <strong>or</strong> the name of the Route to retrieve.</td>
    </tr>
  </tbody>
</table>

<h5 id="retrieve-route-associated-to-a-specific-plugin"><a class="header-link" href="#retrieve-route-associated-to-a-specific-plugin" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Retrieve Route Associated to a Specific Plugin</h5>

<div class="endpoint get">/plugins/{plugin id}/route</div>

<table>
  <thead>
    <tr>
      <th style="text-align: right">Attributes</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right"><code>plugin id</code><br><strong>required</strong></td>
      <td>The unique identifier of the Plugin associated to the Route to be retrieved.</td>
    </tr>
  </tbody>
</table>

<p><em>Response</em></p>

<div><div><pre><code>HTTP 200 OK
</code></pre></div></div>

<div><div><pre><code><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"51e77dc2-8f3e-4afa-9d0e-0e3bbbcfd515"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1422386534</span><span class="p">,</span><span class="w">
    </span><span class="s2">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1422386534</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my-route"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"protocols"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"http"</span><span class="p">,</span><span class="w"> </span><span class="s2">"https"</span><span class="p">],</span><span class="w">
    </span><span class="s2">"methods"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"GET"</span><span class="p">,</span><span class="w"> </span><span class="s2">"POST"</span><span class="p">],</span><span class="w">
    </span><span class="s2">"hosts"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"example.com"</span><span class="p">,</span><span class="w"> </span><span class="s2">"foo.test"</span><span class="p">],</span><span class="w">
    </span><span class="s2">"paths"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"/foo"</span><span class="p">,</span><span class="w"> </span><span class="s2">"/bar"</span><span class="p">],</span><span class="w">
    </span><span class="s2">"https_redirect_status_code"</span><span class="p">:</span><span class="w"> </span><span class="mi">426</span><span class="p">,</span><span class="w">
    </span><span class="s2">"regex_priority"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"strip_path"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"preserve_host"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"user-level"</span><span class="p">,</span><span class="w"> </span><span class="s2">"low-priority"</span><span class="p">],</span><span class="w">
    </span><span class="s2">"service"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"id"</span><span class="p">:</span><span class="s2">"fc73f2af-890d-4f9b-8363-af8945001f7f"</span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div></div>

<hr>

<h3 id="update-route"><a class="header-link" href="#update-route" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Update Route</h3>

<h5 id="update-route-1"><a class="header-link" href="#update-route-1" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Update Route</h5>

<div class="endpoint patch">/routes/{name or id}</div>

<table>
  <thead>
    <tr>
      <th style="text-align: right">Attributes</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right"><code>name or id</code><br><strong>required</strong></td>
      <td>The unique identifier <strong>or</strong> the name of the Route to update.</td>
    </tr>
  </tbody>
</table>

<h5 id="update-route-associated-to-a-specific-plugin"><a class="header-link" href="#update-route-associated-to-a-specific-plugin" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Update Route Associated to a Specific Plugin</h5>

<div class="endpoint patch">/plugins/{plugin id}/route</div>

<table>
  <thead>
    <tr>
      <th style="text-align: right">Attributes</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right"><code>plugin id</code><br><strong>required</strong></td>
      <td>The unique identifier of the Plugin associated to the Route to be updated.</td>
    </tr>
  </tbody>
</table>

<p><em>Request Body</em></p>

<table>
  <thead>
    <tr>
      <th style="text-align: right">Attributes</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right"><code>name</code><br><em>optional</em></td>
      <td>The name of the Route.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>protocols</code></td>
      <td>A list of the protocols this Route should allow. When set to <code>["https"]</code>, HTTP requests are answered with a request to upgrade to HTTPS.  Defaults to <code>["http", "https"]</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>methods</code><br><em>semi-optional</em></td>
      <td>A list of HTTP methods that match this Route. When using <code>http</code> or <code>https</code> protocols, at least one of <code>hosts</code>, <code>paths</code>, or <code>methods</code> must be set.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>hosts</code><br><em>semi-optional</em></td>
      <td>A list of domain names that match this Route. When using <code>http</code> or <code>https</code> protocols, at least one of <code>hosts</code>, <code>paths</code>, or <code>methods</code> must be set.  With form-encoded, the notation is <code>hosts[]=example.com&amp;hosts[]=foo.test</code>. With JSON, use an Array.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>paths</code><br><em>semi-optional</em></td>
      <td>A list of paths that match this Route. When using <code>http</code> or <code>https</code> protocols, at least one of <code>hosts</code>, <code>paths</code>, or <code>methods</code> must be set.  With form-encoded, the notation is <code>paths[]=/foo&amp;paths[]=/bar</code>. With JSON, use an Array.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>https_redirect_status_code</code></td>
      <td>The status code Kong responds with when all properties of a Route match except the protocol i.e. if the protocol of the request is <code>HTTP</code> instead of <code>HTTPS</code>. <code>Location</code> header is injected by Kong if the field is set to 301, 302, 307 or 308.  Defaults to <code>426</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>regex_priority</code><br><em>optional</em></td>
      <td>A number used to choose which route resolves a given request when several routes match it using regexes simultaneously. When two routes match the path and have the same <code>regex_priority</code>, the older one (lowest <code>created_at</code>) is used. Note that the priority for non-regex routes is different (longer non-regex routes are matched before shorter ones).  Defaults to <code>0</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>strip_path</code><br><em>optional</em></td>
      <td>When matching a Route via one of the <code>paths</code>, strip the matching prefix from the upstream request URL.  Defaults to <code>true</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>preserve_host</code><br><em>optional</em></td>
      <td>When matching a Route via one of the <code>hosts</code> domain names, use the request <code>Host</code> header in the upstream request headers. If set to <code>false</code>, the upstream <code>Host</code> header will be that of the Service’s <code>host</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>snis</code><br><em>semi-optional</em></td>
      <td>A list of SNIs that match this Route when using stream routing. When using <code>tcp</code> or <code>tls</code> protocols, at least one of <code>snis</code>, <code>sources</code>, or <code>destinations</code> must be set.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>sources</code><br><em>semi-optional</em></td>
      <td>A list of IP sources of incoming connections that match this Route when using stream routing. Each entry is an object with fields “ip” (optionally in CIDR range notation) and/or “port”. When using <code>tcp</code> or <code>tls</code> protocols, at least one of <code>snis</code>, <code>sources</code>, or <code>destinations</code> must be set.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>destinations</code><br><em>semi-optional</em></td>
      <td>A list of IP destinations of incoming connections that match this Route when using stream routing. Each entry is an object with fields “ip” (optionally in CIDR range notation) and/or “port”. When using <code>tcp</code> or <code>tls</code> protocols, at least one of <code>snis</code>, <code>sources</code>, or <code>destinations</code> must be set.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>tags</code><br><em>optional</em></td>
      <td>An optional set of strings associated with the Route, for grouping and filtering.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>service</code><br><em>optional</em></td>
      <td>The Service this Route is associated to. This is where the Route proxies traffic to.  With form-encoded, the notation is <code>service.id=&lt;service_id&gt;</code>. With JSON, use <code>"service":{"id":"&lt;service_id&gt;"}</code>.</td>
    </tr>
  </tbody>
</table>

<p><em>Response</em></p>

<div><div><pre><code>HTTP 200 OK
</code></pre></div></div>

<div><div><pre><code><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"51e77dc2-8f3e-4afa-9d0e-0e3bbbcfd515"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1422386534</span><span class="p">,</span><span class="w">
    </span><span class="s2">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1422386534</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my-route"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"protocols"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"http"</span><span class="p">,</span><span class="w"> </span><span class="s2">"https"</span><span class="p">],</span><span class="w">
    </span><span class="s2">"methods"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"GET"</span><span class="p">,</span><span class="w"> </span><span class="s2">"POST"</span><span class="p">],</span><span class="w">
    </span><span class="s2">"hosts"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"example.com"</span><span class="p">,</span><span class="w"> </span><span class="s2">"foo.test"</span><span class="p">],</span><span class="w">
    </span><span class="s2">"paths"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"/foo"</span><span class="p">,</span><span class="w"> </span><span class="s2">"/bar"</span><span class="p">],</span><span class="w">
    </span><span class="s2">"https_redirect_status_code"</span><span class="p">:</span><span class="w"> </span><span class="mi">426</span><span class="p">,</span><span class="w">
    </span><span class="s2">"regex_priority"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"strip_path"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"preserve_host"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"user-level"</span><span class="p">,</span><span class="w"> </span><span class="s2">"low-priority"</span><span class="p">],</span><span class="w">
    </span><span class="s2">"service"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"id"</span><span class="p">:</span><span class="s2">"fc73f2af-890d-4f9b-8363-af8945001f7f"</span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div></div>

<hr>

<h3 id="update-or-create-route"><a class="header-link" href="#update-or-create-route" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Update Or Create Route</h3>

<h5 id="create-or-update-route"><a class="header-link" href="#create-or-update-route" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Create Or Update Route</h5>

<div class="endpoint put">/routes/{name or id}</div>

<table>
  <thead>
    <tr>
      <th style="text-align: right">Attributes</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right"><code>name or id</code><br><strong>required</strong></td>
      <td>The unique identifier <strong>or</strong> the name of the Route to create or update.</td>
    </tr>
  </tbody>
</table>

<h5 id="create-or-update-route-associated-to-a-specific-plugin"><a class="header-link" href="#create-or-update-route-associated-to-a-specific-plugin" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Create Or Update Route Associated to a Specific Plugin</h5>

<div class="endpoint put">/plugins/{plugin id}/route</div>

<table>
  <thead>
    <tr>
      <th style="text-align: right">Attributes</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right"><code>plugin id</code><br><strong>required</strong></td>
      <td>The unique identifier of the Plugin associated to the Route to be created or updated.</td>
    </tr>
  </tbody>
</table>

<p><em>Request Body</em></p>

<table>
  <thead>
    <tr>
      <th style="text-align: right">Attributes</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right"><code>name</code><br><em>optional</em></td>
      <td>The name of the Route.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>protocols</code></td>
      <td>A list of the protocols this Route should allow. When set to <code>["https"]</code>, HTTP requests are answered with a request to upgrade to HTTPS.  Defaults to <code>["http", "https"]</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>methods</code><br><em>semi-optional</em></td>
      <td>A list of HTTP methods that match this Route. When using <code>http</code> or <code>https</code> protocols, at least one of <code>hosts</code>, <code>paths</code>, or <code>methods</code> must be set.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>hosts</code><br><em>semi-optional</em></td>
      <td>A list of domain names that match this Route. When using <code>http</code> or <code>https</code> protocols, at least one of <code>hosts</code>, <code>paths</code>, or <code>methods</code> must be set.  With form-encoded, the notation is <code>hosts[]=example.com&amp;hosts[]=foo.test</code>. With JSON, use an Array.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>paths</code><br><em>semi-optional</em></td>
      <td>A list of paths that match this Route. When using <code>http</code> or <code>https</code> protocols, at least one of <code>hosts</code>, <code>paths</code>, or <code>methods</code> must be set.  With form-encoded, the notation is <code>paths[]=/foo&amp;paths[]=/bar</code>. With JSON, use an Array.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>https_redirect_status_code</code></td>
      <td>The status code Kong responds with when all properties of a Route match except the protocol i.e. if the protocol of the request is <code>HTTP</code> instead of <code>HTTPS</code>. <code>Location</code> header is injected by Kong if the field is set to 301, 302, 307 or 308.  Defaults to <code>426</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>regex_priority</code><br><em>optional</em></td>
      <td>A number used to choose which route resolves a given request when several routes match it using regexes simultaneously. When two routes match the path and have the same <code>regex_priority</code>, the older one (lowest <code>created_at</code>) is used. Note that the priority for non-regex routes is different (longer non-regex routes are matched before shorter ones).  Defaults to <code>0</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>strip_path</code><br><em>optional</em></td>
      <td>When matching a Route via one of the <code>paths</code>, strip the matching prefix from the upstream request URL.  Defaults to <code>true</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>preserve_host</code><br><em>optional</em></td>
      <td>When matching a Route via one of the <code>hosts</code> domain names, use the request <code>Host</code> header in the upstream request headers. If set to <code>false</code>, the upstream <code>Host</code> header will be that of the Service’s <code>host</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>snis</code><br><em>semi-optional</em></td>
      <td>A list of SNIs that match this Route when using stream routing. When using <code>tcp</code> or <code>tls</code> protocols, at least one of <code>snis</code>, <code>sources</code>, or <code>destinations</code> must be set.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>sources</code><br><em>semi-optional</em></td>
      <td>A list of IP sources of incoming connections that match this Route when using stream routing. Each entry is an object with fields “ip” (optionally in CIDR range notation) and/or “port”. When using <code>tcp</code> or <code>tls</code> protocols, at least one of <code>snis</code>, <code>sources</code>, or <code>destinations</code> must be set.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>destinations</code><br><em>semi-optional</em></td>
      <td>A list of IP destinations of incoming connections that match this Route when using stream routing. Each entry is an object with fields “ip” (optionally in CIDR range notation) and/or “port”. When using <code>tcp</code> or <code>tls</code> protocols, at least one of <code>snis</code>, <code>sources</code>, or <code>destinations</code> must be set.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>tags</code><br><em>optional</em></td>
      <td>An optional set of strings associated with the Route, for grouping and filtering.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>service</code><br><em>optional</em></td>
      <td>The Service this Route is associated to. This is where the Route proxies traffic to.  With form-encoded, the notation is <code>service.id=&lt;service_id&gt;</code>. With JSON, use <code>"service":{"id":"&lt;service_id&gt;"}</code>.</td>
    </tr>
  </tbody>
</table>

<p>Inserts (or replaces) the Route under the requested resource with the
definition specified in the body. The Route will be identified via the <code>name
or id</code> attribute.</p>

<p>When the <code>name or id</code> attribute has the structure of a UUID, the Route being
inserted/replaced will be identified by its <code>id</code>. Otherwise it will be
identified by its <code>name</code>.</p>

<p>When creating a new Route without specifying <code>id</code> (neither in the URL nor in
the body), then it will be auto-generated.</p>

<p>Notice that specifying a <code>name</code> in the URL and a different one in the request
body is not allowed.</p>

<p><em>Response</em></p>

<div><div><pre><code>HTTP 201 Created or HTTP 200 OK
</code></pre></div></div>

<p>See POST and PATCH responses.</p>

<hr>

<h3 id="delete-route"><a class="header-link" href="#delete-route" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Delete Route</h3>

<h5 id="delete-route-1"><a class="header-link" href="#delete-route-1" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Delete Route</h5>

<div class="endpoint delete">/routes/{name or id}</div>

<table>
  <thead>
    <tr>
      <th style="text-align: right">Attributes</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right"><code>name or id</code><br><strong>required</strong></td>
      <td>The unique identifier <strong>or</strong> the name of the Route to delete.</td>
    </tr>
  </tbody>
</table>

<p><em>Response</em></p>

<div><div><pre><code>HTTP 204 No Content
</code></pre></div></div>

<hr>

<h2 id="consumer-object"><a class="header-link" href="#consumer-object" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Consumer Object</h2>

<p>The Consumer object represents a consumer - or a user - of a Service. You can
either rely on Kong as the primary datastore, or you can map the consumer list
with your database to keep consistency between Kong and your existing primary
datastore.</p>

<p>Consumers can be both <a href="#tags">tagged and filtered by tags</a>.</p>

<div><div><pre><code><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"127dfc88-ed57-45bf-b77a-a9d3a152ad31"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1422386534</span><span class="p">,</span><span class="w">
    </span><span class="s2">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my-username"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"custom_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my-custom-id"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"user-level"</span><span class="p">,</span><span class="w"> </span><span class="s2">"low-priority"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div></div>

<h3 id="add-consumer"><a class="header-link" href="#add-consumer" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Add Consumer</h3>

<h5 id="create-consumer"><a class="header-link" href="#create-consumer" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Create Consumer</h5>

<div class="endpoint post">/consumers</div>

<p><em>Request Body</em></p>

<table>
  <thead>
    <tr>
      <th style="text-align: right">Attributes</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right"><code>username</code><br><em>semi-optional</em></td>
      <td>The unique username of the consumer. You must send either this field or <code>custom_id</code> with the request.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>custom_id</code><br><em>semi-optional</em></td>
      <td>Field for storing an existing unique ID for the consumer - useful for mapping Kong with users in your existing database. You must send either this field or <code>username</code> with the request.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>tags</code><br><em>optional</em></td>
      <td>An optional set of strings associated with the Consumer, for grouping and filtering.</td>
    </tr>
  </tbody>
</table>

<p><em>Response</em></p>

<div><div><pre><code>HTTP 201 Created</code></pre></div></div>

<div><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"127dfc88-ed57-45bf-b77a-a9d3a152ad31"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1422386534</span><span class="p">,</span><span class="w">
    </span><span class="s2">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my-username"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"custom_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my-custom-id"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"user-level"</span><span class="p">,</span><span class="w"> </span><span class="s2">"low-priority"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div></div>

<hr>

<h3 id="list-consumers"><a class="header-link" href="#list-consumers" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>List Consumers</h3>

<h5 id="list-all-consumers"><a class="header-link" href="#list-all-consumers" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>List All Consumers</h5>

<div class="endpoint get">/consumers</div>

<p><em>Response</em></p>

<div><div class="highlight"><pre class="highlight"><code>HTTP 200 OK
</code></pre></div></div>

<div><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
</span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9aa116fd-ef4a-4efa-89bf-a0b17c4be982"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1422386534</span><span class="p">,</span><span class="w">
    </span><span class="s2">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my-username"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"custom_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my-custom-id"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"user-level"</span><span class="p">,</span><span class="w"> </span><span class="s2">"low-priority"</span><span class="p">]</span><span class="w">
</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ba641b07-e74a-430a-ab46-94b61e5ea66b"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1422386534</span><span class="p">,</span><span class="w">
    </span><span class="s2">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my-username"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"custom_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my-custom-id"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"admin"</span><span class="p">,</span><span class="w"> </span><span class="s2">"high-priority"</span><span class="p">,</span><span class="w"> </span><span class="s2">"critical"</span><span class="p">]</span><span class="w">
</span><span class="p">}],</span><span class="w">

    </span><span class="s2">"next"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://localhost:8001/consumers?offset=6378122c-a0a1-438d-a5c6-efabae9fb969"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<hr>

<h3 id="retrieve-consumer"><a class="header-link" href="#retrieve-consumer" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Retrieve Consumer</h3>

<h5 id="retrieve-consumer-1"><a class="header-link" href="#retrieve-consumer-1" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Retrieve Consumer</h5>

<div class="endpoint get">/consumers/{username or id}</div>

<table>
  <thead>
    <tr>
      <th style="text-align: right">Attributes</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right"><code>username or id</code><br><strong>required</strong></td>
      <td>The unique identifier <strong>or</strong> the username of the Consumer to retrieve.</td>
    </tr>
  </tbody>
</table>

<h5 id="retrieve-consumer-associated-to-a-specific-plugin"><a class="header-link" href="#retrieve-consumer-associated-to-a-specific-plugin" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Retrieve Consumer Associated to a Specific Plugin</h5>

<div class="endpoint get">/plugins/{plugin id}/consumer</div>

<table>
  <thead>
    <tr>
      <th style="text-align: right">Attributes</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right"><code>plugin id</code><br><strong>required</strong></td>
      <td>The unique identifier of the Plugin associated to the Consumer to be retrieved.</td>
    </tr>
  </tbody>
</table>

<p><em>Response</em></p>

<div><div class="highlight"><pre class="highlight"><code>HTTP 200 OK
</code></pre></div></div>

<div><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"127dfc88-ed57-45bf-b77a-a9d3a152ad31"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1422386534</span><span class="p">,</span><span class="w">
    </span><span class="s2">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my-username"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"custom_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my-custom-id"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"user-level"</span><span class="p">,</span><span class="w"> </span><span class="s2">"low-priority"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div></div>

<hr>

<h3 id="update-consumer"><a class="header-link" href="#update-consumer" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Update Consumer</h3>

<h5 id="update-consumer-1"><a class="header-link" href="#update-consumer-1" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Update Consumer</h5>

<div class="endpoint patch">/consumers/{username or id}</div>

<table>
  <thead>
    <tr>
      <th style="text-align: right">Attributes</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right"><code>username or id</code><br><strong>required</strong></td>
      <td>The unique identifier <strong>or</strong> the username of the Consumer to update.</td>
    </tr>
  </tbody>
</table>

<h5 id="update-consumer-associated-to-a-specific-plugin"><a class="header-link" href="#update-consumer-associated-to-a-specific-plugin" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Update Consumer Associated to a Specific Plugin</h5>

<div class="endpoint patch">/plugins/{plugin id}/consumer</div>

<table>
  <thead>
    <tr>
      <th style="text-align: right">Attributes</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right"><code>plugin id</code><br><strong>required</strong></td>
      <td>The unique identifier of the Plugin associated to the Consumer to be updated.</td>
    </tr>
  </tbody>
</table>

<p><em>Request Body</em></p>

<table>
  <thead>
    <tr>
      <th style="text-align: right">Attributes</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right"><code>username</code><br><em>semi-optional</em></td>
      <td>The unique username of the consumer. You must send either this field or <code>custom_id</code> with the request.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>custom_id</code><br><em>semi-optional</em></td>
      <td>Field for storing an existing unique ID for the consumer - useful for mapping Kong with users in your existing database. You must send either this field or <code>username</code> with the request.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>tags</code><br><em>optional</em></td>
      <td>An optional set of strings associated with the Consumer, for grouping and filtering.</td>
    </tr>
  </tbody>
</table>

<p><em>Response</em></p>

<div><div class="highlight"><pre class="highlight"><code>HTTP 200 OK
</code></pre></div></div>

<div><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"127dfc88-ed57-45bf-b77a-a9d3a152ad31"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1422386534</span><span class="p">,</span><span class="w">
    </span><span class="s2">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my-username"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"custom_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my-custom-id"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"user-level"</span><span class="p">,</span><span class="w"> </span><span class="s2">"low-priority"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div></div>

<hr>

<h3 id="update-or-create-consumer"><a class="header-link" href="#update-or-create-consumer" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Update Or Create Consumer</h3>

<h5 id="create-or-update-consumer"><a class="header-link" href="#create-or-update-consumer" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Create Or Update Consumer</h5>

<div class="endpoint put">/consumers/{username or id}</div>

<table>
  <thead>
    <tr>
      <th style="text-align: right">Attributes</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right"><code>username or id</code><br><strong>required</strong></td>
      <td>The unique identifier <strong>or</strong> the username of the Consumer to create or update.</td>
    </tr>
  </tbody>
</table>

<h5 id="create-or-update-consumer-associated-to-a-specific-plugin"><a class="header-link" href="#create-or-update-consumer-associated-to-a-specific-plugin" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Create Or Update Consumer Associated to a Specific Plugin</h5>

<div class="endpoint put">/plugins/{plugin id}/consumer</div>

<table>
  <thead>
    <tr>
      <th style="text-align: right">Attributes</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right"><code>plugin id</code><br><strong>required</strong></td>
      <td>The unique identifier of the Plugin associated to the Consumer to be created or updated.</td>
    </tr>
  </tbody>
</table>

<p><em>Request Body</em></p>

<table>
  <thead>
    <tr>
      <th style="text-align: right">Attributes</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right"><code>username</code><br><em>semi-optional</em></td>
      <td>The unique username of the consumer. You must send either this field or <code>custom_id</code> with the request.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>custom_id</code><br><em>semi-optional</em></td>
      <td>Field for storing an existing unique ID for the consumer - useful for mapping Kong with users in your existing database. You must send either this field or <code>username</code> with the request.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>tags</code><br><em>optional</em></td>
      <td>An optional set of strings associated with the Consumer, for grouping and filtering.</td>
    </tr>
  </tbody>
</table>

<p>Inserts (or replaces) the Consumer under the requested resource with the
definition specified in the body. The Consumer will be identified via the <code>username
or id</code> attribute.</p>

<p>When the <code>username or id</code> attribute has the structure of a UUID, the Consumer being
inserted/replaced will be identified by its <code>id</code>. Otherwise it will be
identified by its <code>username</code>.</p>

<p>When creating a new Consumer without specifying <code>id</code> (neither in the URL nor in
the body), then it will be auto-generated.</p>

<p>Notice that specifying a <code>username</code> in the URL and a different one in the request
body is not allowed.</p>

<p><em>Response</em></p>

<div><div class="highlight"><pre class="highlight"><code>HTTP 201 Created or HTTP 200 OK
</code></pre></div></div>

<p>See POST and PATCH responses.</p>

<hr>

<h3 id="delete-consumer"><a class="header-link" href="#delete-consumer" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Delete Consumer</h3>

<h5 id="delete-consumer-1"><a class="header-link" href="#delete-consumer-1" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Delete Consumer</h5>

<div class="endpoint delete">/consumers/{username or id}</div>

<table>
  <thead>
    <tr>
      <th style="text-align: right">Attributes</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right"><code>username or id</code><br><strong>required</strong></td>
      <td>The unique identifier <strong>or</strong> the username of the Consumer to delete.</td>
    </tr>
  </tbody>
</table>

<p><em>Response</em></p>

<div><div class="highlight"><pre class="highlight"><code>HTTP 204 No Content
</code></pre></div></div>

<hr>

<h2 id="plugin-object"><a class="header-link" href="#plugin-object" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Plugin Object</h2>

<p>A Plugin entity represents a plugin configuration that will be executed during
the HTTP request/response lifecycle. It is how you can add functionalities
to Services that run behind Kong, like Authentication or Rate Limiting for
example. You can find more information about how to install and what values
each plugin takes by visiting the <a href="https://docs.konghq.com/hub/">Kong Hub</a>.</p>

<p>When adding a Plugin Configuration to a Service, every request made by a client to
that Service will run said Plugin. If a Plugin needs to be tuned to different
values for some specific Consumers, you can do so by creating a separate
plugin instance that specifies both the Service and the Consumer, through the
<code>service</code> and <code>consumer</code> fields.</p>

<p>Plugins can be both <a href="#tags">tagged and filtered by tags</a>.</p>

<div><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ec1a1f6f-2aa4-4e58-93ff-b56368f19b27"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rate-limiting"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1422386534</span><span class="p">,</span><span class="w">
    </span><span class="s2">"route"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"service"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"consumer"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"config"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"hour"</span><span class="p">:</span><span class="mi">500</span><span class="p">,</span><span class="w"> </span><span class="s2">"minute"</span><span class="p">:</span><span class="mi">20</span><span class="p">},</span><span class="w">
    </span><span class="s2">"run_on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"first"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"protocols"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"http"</span><span class="p">,</span><span class="w"> </span><span class="s2">"https"</span><span class="p">],</span><span class="w">
    </span><span class="s2">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"user-level"</span><span class="p">,</span><span class="w"> </span><span class="s2">"low-priority"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div></div>

<p>See the <a href="#precedence">Precedence</a> section below for more details.</p>

<h4 id="precedence"><a class="header-link" href="#precedence" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Precedence</h4>

<p>A plugin will always be run once and only once per request. But the
configuration with which it will run depends on the entities it has been
configured for.</p>

<p>Plugins can be configured for various entities, combination of entities, or
even globally. This is useful, for example, when you wish to configure a plugin
a certain way for most requests, but make <em>authenticated requests</em> behave
slightly differently.</p>

<p>Therefore, there exists an order of precedence for running a plugin when it has
been applied to different entities with different configurations. The rule of
thumb is: the more specific a plugin is with regards to how many entities it
has been configured on, the higher its priority.</p>

<p>The complete order of precedence when a plugin has been configured multiple
times is:</p>

<ol>
  <li>Plugins configured on a combination of: a Route, a Service, and a Consumer.
 (Consumer means the request must be authenticated).</li>
  <li>Plugins configured on a combination of a Route and a Consumer.
 (Consumer means the request must be authenticated).</li>
  <li>Plugins configured on a combination of a Service and a Consumer.
 (Consumer means the request must be authenticated).</li>
  <li>Plugins configured on a combination of a Route and a Service.</li>
  <li>Plugins configured on a Consumer.
 (Consumer means the request must be authenticated).</li>
  <li>Plugins configured on a Route.</li>
  <li>Plugins configured on a Service.</li>
  <li>Plugins configured to run globally.</li>
</ol>

<p><strong>Example</strong>: if the <code>rate-limiting</code> plugin is applied twice (with different
configurations): for a Service (Plugin config A), and for a Consumer (Plugin
config B), then requests authenticating this Consumer will run Plugin config B
and ignore A. However, requests that do not authenticate this Consumer will
fallback to running Plugin config A. Note that if config B is disabled
(its <code>enabled</code> flag is set to <code>false</code>), config A will apply to requests that
would have otherwise matched config B.</p>

<h3 id="add-plugin"><a class="header-link" href="#add-plugin" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Add Plugin</h3>

<h5 id="create-plugin"><a class="header-link" href="#create-plugin" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Create Plugin</h5>

<div class="endpoint post">/plugins</div>

<h5 id="create-plugin-associated-to-a-specific-route"><a class="header-link" href="#create-plugin-associated-to-a-specific-route" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Create Plugin Associated to a Specific Route</h5>

<div class="endpoint post">/routes/{route id}/plugins</div>

<table>
  <thead>
    <tr>
      <th style="text-align: right">Attributes</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right"><code>route id</code><br><strong>required</strong></td>
      <td>The unique identifier of the Route that should be associated to the newly-created Plugin.</td>
    </tr>
  </tbody>
</table>

<h5 id="create-plugin-associated-to-a-specific-service"><a class="header-link" href="#create-plugin-associated-to-a-specific-service" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Create Plugin Associated to a Specific Service</h5>

<div class="endpoint post">/services/{service id}/plugins</div>

<table>
  <thead>
    <tr>
      <th style="text-align: right">Attributes</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right"><code>service id</code><br><strong>required</strong></td>
      <td>The unique identifier of the Service that should be associated to the newly-created Plugin.</td>
    </tr>
  </tbody>
</table>

<h5 id="create-plugin-associated-to-a-specific-consumer"><a class="header-link" href="#create-plugin-associated-to-a-specific-consumer" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Create Plugin Associated to a Specific Consumer</h5>

<div class="endpoint post">/consumers/{consumer id}/plugins</div>

<table>
  <thead>
    <tr>
      <th style="text-align: right">Attributes</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right"><code>consumer id</code><br><strong>required</strong></td>
      <td>The unique identifier of the Consumer that should be associated to the newly-created Plugin.</td>
    </tr>
  </tbody>
</table>

<p><em>Request Body</em></p>

<table>
  <thead>
    <tr>
      <th style="text-align: right">Attributes</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right"><code>name</code></td>
      <td>The name of the Plugin that’s going to be added. Currently the Plugin must be installed in every Kong instance separately.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>route</code><br><em>optional</em></td>
      <td>If set, the plugin will only activate when receiving requests via the specified route. Leave unset for the plugin to activate regardless of the Route being used.  Defaults to <code>null</code>. With form-encoded, the notation is <code>route.id=&lt;route_id&gt;</code>. With JSON, use <code>"route":{"id":"&lt;route_id&gt;"}</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>service</code><br><em>optional</em></td>
      <td>If set, the plugin will only activate when receiving requests via one of the routes belonging to the specified Service. Leave unset for the plugin to activate regardless of the Service being matched.  Defaults to <code>null</code>. With form-encoded, the notation is <code>service.id=&lt;service_id&gt;</code>. With JSON, use <code>"service":{"id":"&lt;service_id&gt;"}</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>consumer</code><br><em>optional</em></td>
      <td>If set, the plugin will activate only for requests where the specified has been authenticated. (Note that some plugins can not be restricted to consumers this way.). Leave unset for the plugin to activate regardless of the authenticated consumer.  Defaults to <code>null</code>. With form-encoded, the notation is <code>consumer.id=&lt;consumer_id&gt;</code>. With JSON, use <code>"consumer":{"id":"&lt;consumer_id&gt;"}</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>config</code><br><em>optional</em></td>
      <td>The configuration properties for the Plugin which can be found on the plugins documentation page in the <a href="https://docs.konghq.com/hub/">Kong Hub</a>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>run_on</code></td>
      <td>Control on which Kong nodes this plugin will run, given a Service Mesh scenario. Accepted values are: * <code>first</code>, meaning “run on the first Kong node that is encountered by the request”. On an API Getaway scenario, this is the usual operation, since there is only one Kong node in between source and destination. In a sidecar-to-sidecar Service Mesh scenario, this means running the plugin only on the Kong sidecar of the outbound connection. * <code>second</code>, meaning “run on the second node that is encountered by the request”. This option is only relevant for sidecar-to-sidecar Service Mesh scenarios: this means running the plugin only on the Kong sidecar of the inbound connection. * <code>all</code> means “run on all nodes”, meaning both sidecars in a sidecar-to-sidecar scenario. This is useful for tracing/logging plugins.  Defaults to <code>"first"</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>protocols</code></td>
      <td>A list of the request protocols that will trigger this plugin. Possible values are <code>"http"</code>, <code>"https"</code>, <code>"tcp"</code>, and <code>"tls"</code>. The default value, as well as the possible values allowed on this field, may change depending on the plugin type. For example, plugins that only work in stream mode will may only support <code>"tcp"</code> and <code>"tls"</code>.  Defaults to <code>["http", "https"]</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>enabled</code><br><em>optional</em></td>
      <td>Whether the plugin is applied. Defaults to <code>true</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>tags</code><br><em>optional</em></td>
      <td>An optional set of strings associated with the Plugin, for grouping and filtering.</td>
    </tr>
  </tbody>
</table>

<p><em>Response</em></p>

<div><div class="highlight"><pre class="highlight"><code>HTTP 201 Created
</code></pre></div></div>

<div><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ec1a1f6f-2aa4-4e58-93ff-b56368f19b27"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rate-limiting"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1422386534</span><span class="p">,</span><span class="w">
    </span><span class="s2">"route"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"service"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"consumer"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"config"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"hour"</span><span class="p">:</span><span class="mi">500</span><span class="p">,</span><span class="w"> </span><span class="s2">"minute"</span><span class="p">:</span><span class="mi">20</span><span class="p">},</span><span class="w">
    </span><span class="s2">"run_on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"first"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"protocols"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"http"</span><span class="p">,</span><span class="w"> </span><span class="s2">"https"</span><span class="p">],</span><span class="w">
    </span><span class="s2">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"user-level"</span><span class="p">,</span><span class="w"> </span><span class="s2">"low-priority"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div></div>

<hr>

<h3 id="list-plugins"><a class="header-link" href="#list-plugins" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>List Plugins</h3>

<h5 id="list-all-plugins"><a class="header-link" href="#list-all-plugins" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>List All Plugins</h5>

<div class="endpoint get">/plugins</div>

<h5 id="list-plugins-associated-to-a-specific-route"><a class="header-link" href="#list-plugins-associated-to-a-specific-route" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>List Plugins Associated to a Specific Route</h5>

<div class="endpoint get">/routes/{route id}/plugins</div>

<table>
  <thead>
    <tr>
      <th style="text-align: right">Attributes</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right"><code>route id</code><br><strong>required</strong></td>
      <td>The unique identifier of the Route whose Plugins are to be retrieved. When using this endpoint, only Plugins associated to the specified Route will be listed.</td>
    </tr>
  </tbody>
</table>

<h5 id="list-plugins-associated-to-a-specific-service"><a class="header-link" href="#list-plugins-associated-to-a-specific-service" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>List Plugins Associated to a Specific Service</h5>

<div class="endpoint get">/services/{service id}/plugins</div>

<table>
  <thead>
    <tr>
      <th style="text-align: right">Attributes</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right"><code>service id</code><br><strong>required</strong></td>
      <td>The unique identifier of the Service whose Plugins are to be retrieved. When using this endpoint, only Plugins associated to the specified Service will be listed.</td>
    </tr>
  </tbody>
</table>

<h5 id="list-plugins-associated-to-a-specific-consumer"><a class="header-link" href="#list-plugins-associated-to-a-specific-consumer" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>List Plugins Associated to a Specific Consumer</h5>

<div class="endpoint get">/consumers/{consumer id}/plugins</div>

<table>
  <thead>
    <tr>
      <th style="text-align: right">Attributes</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right"><code>consumer id</code><br><strong>required</strong></td>
      <td>The unique identifier of the Consumer whose Plugins are to be retrieved. When using this endpoint, only Plugins associated to the specified Consumer will be listed.</td>
    </tr>
  </tbody>
</table>

<p><em>Response</em></p>

<div><div class="highlight"><pre class="highlight"><code>HTTP 200 OK
</code></pre></div></div>

<div><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
</span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a4407883-c166-43fd-80ca-3ca035b0cdb7"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rate-limiting"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1422386534</span><span class="p">,</span><span class="w">
    </span><span class="s2">"route"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"service"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"consumer"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"config"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"hour"</span><span class="p">:</span><span class="mi">500</span><span class="p">,</span><span class="w"> </span><span class="s2">"minute"</span><span class="p">:</span><span class="mi">20</span><span class="p">},</span><span class="w">
    </span><span class="s2">"run_on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"first"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"protocols"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"http"</span><span class="p">,</span><span class="w"> </span><span class="s2">"https"</span><span class="p">],</span><span class="w">
    </span><span class="s2">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"user-level"</span><span class="p">,</span><span class="w"> </span><span class="s2">"low-priority"</span><span class="p">]</span><span class="w">
</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"01c23299-839c-49a5-a6d5-8864c09184af"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rate-limiting"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1422386534</span><span class="p">,</span><span class="w">
    </span><span class="s2">"route"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"service"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"consumer"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"config"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"hour"</span><span class="p">:</span><span class="mi">500</span><span class="p">,</span><span class="w"> </span><span class="s2">"minute"</span><span class="p">:</span><span class="mi">20</span><span class="p">},</span><span class="w">
    </span><span class="s2">"run_on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"first"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"protocols"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"tcp"</span><span class="p">,</span><span class="w"> </span><span class="s2">"tls"</span><span class="p">],</span><span class="w">
    </span><span class="s2">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"admin"</span><span class="p">,</span><span class="w"> </span><span class="s2">"high-priority"</span><span class="p">,</span><span class="w"> </span><span class="s2">"critical"</span><span class="p">]</span><span class="w">
</span><span class="p">}],</span><span class="w">

    </span><span class="s2">"next"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://localhost:8001/plugins?offset=6378122c-a0a1-438d-a5c6-efabae9fb969"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<hr>

<h3 id="retrieve-plugin"><a class="header-link" href="#retrieve-plugin" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Retrieve Plugin</h3>

<h5 id="retrieve-plugin-1"><a class="header-link" href="#retrieve-plugin-1" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Retrieve Plugin</h5>

<div class="endpoint get">/plugins/{plugin id}</div>

<table>
  <thead>
    <tr>
      <th style="text-align: right">Attributes</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right"><code>plugin id</code><br><strong>required</strong></td>
      <td>The unique identifier of the Plugin to retrieve.</td>
    </tr>
  </tbody>
</table>

<p><em>Response</em></p>

<div><div class="highlight"><pre class="highlight"><code>HTTP 200 OK
</code></pre></div></div>

<div><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ec1a1f6f-2aa4-4e58-93ff-b56368f19b27"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rate-limiting"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1422386534</span><span class="p">,</span><span class="w">
    </span><span class="s2">"route"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"service"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"consumer"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"config"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"hour"</span><span class="p">:</span><span class="mi">500</span><span class="p">,</span><span class="w"> </span><span class="s2">"minute"</span><span class="p">:</span><span class="mi">20</span><span class="p">},</span><span class="w">
    </span><span class="s2">"run_on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"first"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"protocols"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"http"</span><span class="p">,</span><span class="w"> </span><span class="s2">"https"</span><span class="p">],</span><span class="w">
    </span><span class="s2">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"user-level"</span><span class="p">,</span><span class="w"> </span><span class="s2">"low-priority"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div></div>

<hr>

<h3 id="update-plugin"><a class="header-link" href="#update-plugin" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Update Plugin</h3>

<h5 id="update-plugin-1"><a class="header-link" href="#update-plugin-1" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Update Plugin</h5>

<div class="endpoint patch">/plugins/{plugin id}</div>

<table>
  <thead>
    <tr>
      <th style="text-align: right">Attributes</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right"><code>plugin id</code><br><strong>required</strong></td>
      <td>The unique identifier of the Plugin to update.</td>
    </tr>
  </tbody>
</table>

<p><em>Request Body</em></p>

<table>
  <thead>
    <tr>
      <th style="text-align: right">Attributes</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right"><code>name</code></td>
      <td>The name of the Plugin that’s going to be added. Currently the Plugin must be installed in every Kong instance separately.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>route</code><br><em>optional</em></td>
      <td>If set, the plugin will only activate when receiving requests via the specified route. Leave unset for the plugin to activate regardless of the Route being used.  Defaults to <code>null</code>. With form-encoded, the notation is <code>route.id=&lt;route_id&gt;</code>. With JSON, use <code>"route":{"id":"&lt;route_id&gt;"}</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>service</code><br><em>optional</em></td>
      <td>If set, the plugin will only activate when receiving requests via one of the routes belonging to the specified Service. Leave unset for the plugin to activate regardless of the Service being matched.  Defaults to <code>null</code>. With form-encoded, the notation is <code>service.id=&lt;service_id&gt;</code>. With JSON, use <code>"service":{"id":"&lt;service_id&gt;"}</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>consumer</code><br><em>optional</em></td>
      <td>If set, the plugin will activate only for requests where the specified has been authenticated. (Note that some plugins can not be restricted to consumers this way.). Leave unset for the plugin to activate regardless of the authenticated consumer.  Defaults to <code>null</code>. With form-encoded, the notation is <code>consumer.id=&lt;consumer_id&gt;</code>. With JSON, use <code>"consumer":{"id":"&lt;consumer_id&gt;"}</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>config</code><br><em>optional</em></td>
      <td>The configuration properties for the Plugin which can be found on the plugins documentation page in the <a href="https://docs.konghq.com/hub/">Kong Hub</a>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>run_on</code></td>
      <td>Control on which Kong nodes this plugin will run, given a Service Mesh scenario. Accepted values are: * <code>first</code>, meaning “run on the first Kong node that is encountered by the request”. On an API Getaway scenario, this is the usual operation, since there is only one Kong node in between source and destination. In a sidecar-to-sidecar Service Mesh scenario, this means running the plugin only on the Kong sidecar of the outbound connection. * <code>second</code>, meaning “run on the second node that is encountered by the request”. This option is only relevant for sidecar-to-sidecar Service Mesh scenarios: this means running the plugin only on the Kong sidecar of the inbound connection. * <code>all</code> means “run on all nodes”, meaning both sidecars in a sidecar-to-sidecar scenario. This is useful for tracing/logging plugins.  Defaults to <code>"first"</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>protocols</code></td>
      <td>A list of the request protocols that will trigger this plugin. Possible values are <code>"http"</code>, <code>"https"</code>, <code>"tcp"</code>, and <code>"tls"</code>. The default value, as well as the possible values allowed on this field, may change depending on the plugin type. For example, plugins that only work in stream mode will may only support <code>"tcp"</code> and <code>"tls"</code>.  Defaults to <code>["http", "https"]</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>enabled</code><br><em>optional</em></td>
      <td>Whether the plugin is applied. Defaults to <code>true</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>tags</code><br><em>optional</em></td>
      <td>An optional set of strings associated with the Plugin, for grouping and filtering.</td>
    </tr>
  </tbody>
</table>

<p><em>Response</em></p>

<div><div class="highlight"><pre class="highlight"><code>HTTP 200 OK
</code></pre></div></div>

<div><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ec1a1f6f-2aa4-4e58-93ff-b56368f19b27"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rate-limiting"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1422386534</span><span class="p">,</span><span class="w">
    </span><span class="s2">"route"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"service"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"consumer"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"config"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"hour"</span><span class="p">:</span><span class="mi">500</span><span class="p">,</span><span class="w"> </span><span class="s2">"minute"</span><span class="p">:</span><span class="mi">20</span><span class="p">},</span><span class="w">
    </span><span class="s2">"run_on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"first"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"protocols"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"http"</span><span class="p">,</span><span class="w"> </span><span class="s2">"https"</span><span class="p">],</span><span class="w">
    </span><span class="s2">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"user-level"</span><span class="p">,</span><span class="w"> </span><span class="s2">"low-priority"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div></div>

<hr>

<h3 id="update-or-create-plugin"><a class="header-link" href="#update-or-create-plugin" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Update Or Create Plugin</h3>

<h5 id="create-or-update-plugin"><a class="header-link" href="#create-or-update-plugin" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Create Or Update Plugin</h5>

<div class="endpoint put">/plugins/{plugin id}</div>

<table>
  <thead>
    <tr>
      <th style="text-align: right">Attributes</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right"><code>plugin id</code><br><strong>required</strong></td>
      <td>The unique identifier of the Plugin to create or update.</td>
    </tr>
  </tbody>
</table>

<p><em>Request Body</em></p>

<table>
  <thead>
    <tr>
      <th style="text-align: right">Attributes</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right"><code>name</code></td>
      <td>The name of the Plugin that’s going to be added. Currently the Plugin must be installed in every Kong instance separately.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>route</code><br><em>optional</em></td>
      <td>If set, the plugin will only activate when receiving requests via the specified route. Leave unset for the plugin to activate regardless of the Route being used.  Defaults to <code>null</code>. With form-encoded, the notation is <code>route.id=&lt;route_id&gt;</code>. With JSON, use <code>"route":{"id":"&lt;route_id&gt;"}</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>service</code><br><em>optional</em></td>
      <td>If set, the plugin will only activate when receiving requests via one of the routes belonging to the specified Service. Leave unset for the plugin to activate regardless of the Service being matched.  Defaults to <code>null</code>. With form-encoded, the notation is <code>service.id=&lt;service_id&gt;</code>. With JSON, use <code>"service":{"id":"&lt;service_id&gt;"}</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>consumer</code><br><em>optional</em></td>
      <td>If set, the plugin will activate only for requests where the specified has been authenticated. (Note that some plugins can not be restricted to consumers this way.). Leave unset for the plugin to activate regardless of the authenticated consumer.  Defaults to <code>null</code>. With form-encoded, the notation is <code>consumer.id=&lt;consumer_id&gt;</code>. With JSON, use <code>"consumer":{"id":"&lt;consumer_id&gt;"}</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>config</code><br><em>optional</em></td>
      <td>The configuration properties for the Plugin which can be found on the plugins documentation page in the <a href="https://docs.konghq.com/hub/">Kong Hub</a>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>run_on</code></td>
      <td>Control on which Kong nodes this plugin will run, given a Service Mesh scenario. Accepted values are: * <code>first</code>, meaning “run on the first Kong node that is encountered by the request”. On an API Getaway scenario, this is the usual operation, since there is only one Kong node in between source and destination. In a sidecar-to-sidecar Service Mesh scenario, this means running the plugin only on the Kong sidecar of the outbound connection. * <code>second</code>, meaning “run on the second node that is encountered by the request”. This option is only relevant for sidecar-to-sidecar Service Mesh scenarios: this means running the plugin only on the Kong sidecar of the inbound connection. * <code>all</code> means “run on all nodes”, meaning both sidecars in a sidecar-to-sidecar scenario. This is useful for tracing/logging plugins.  Defaults to <code>"first"</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>protocols</code></td>
      <td>A list of the request protocols that will trigger this plugin. Possible values are <code>"http"</code>, <code>"https"</code>, <code>"tcp"</code>, and <code>"tls"</code>. The default value, as well as the possible values allowed on this field, may change depending on the plugin type. For example, plugins that only work in stream mode will may only support <code>"tcp"</code> and <code>"tls"</code>.  Defaults to <code>["http", "https"]</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>enabled</code><br><em>optional</em></td>
      <td>Whether the plugin is applied. Defaults to <code>true</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>tags</code><br><em>optional</em></td>
      <td>An optional set of strings associated with the Plugin, for grouping and filtering.</td>
    </tr>
  </tbody>
</table>

<p>Inserts (or replaces) the Plugin under the requested resource with the
definition specified in the body. The Plugin will be identified via the <code>name
or id</code> attribute.</p>

<p>When the <code>name or id</code> attribute has the structure of a UUID, the Plugin being
inserted/replaced will be identified by its <code>id</code>. Otherwise it will be
identified by its <code>name</code>.</p>

<p>When creating a new Plugin without specifying <code>id</code> (neither in the URL nor in
the body), then it will be auto-generated.</p>

<p>Notice that specifying a <code>name</code> in the URL and a different one in the request
body is not allowed.</p>

<p><em>Response</em></p>

<div><div class="highlight"><pre class="highlight"><code>HTTP 201 Created or HTTP 200 OK
</code></pre></div></div>

<p>See POST and PATCH responses.</p>

<hr>

<h3 id="delete-plugin"><a class="header-link" href="#delete-plugin" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Delete Plugin</h3>

<h5 id="delete-plugin-1"><a class="header-link" href="#delete-plugin-1" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Delete Plugin</h5>

<div class="endpoint delete">/plugins/{plugin id}</div>

<table>
  <thead>
    <tr>
      <th style="text-align: right">Attributes</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right"><code>plugin id</code><br><strong>required</strong></td>
      <td>The unique identifier of the Plugin to delete.</td>
    </tr>
  </tbody>
</table>

<p><em>Response</em></p>

<div><div class="highlight"><pre class="highlight"><code>HTTP 204 No Content
</code></pre></div></div>

<hr>

<h3 id="retrieve-enabled-plugins"><a class="header-link" href="#retrieve-enabled-plugins" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Retrieve Enabled Plugins</h3>

<p>Retrieve a list of all installed plugins on the Kong node.</p>

<div class="endpoint get">/plugins/enabled</div>

<p><em>Response</em></p>

<div><div class="highlight"><pre class="highlight"><code>HTTP 200 OK
</code></pre></div></div>

<div><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"enabled_plugins"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"jwt"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"acl"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"cors"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"oauth2"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"tcp-log"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"udp-log"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"file-log"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"http-log"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"key-auth"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"hmac-auth"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"basic-auth"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"ip-restriction"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"request-transformer"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"response-transformer"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"request-size-limiting"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"rate-limiting"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"response-ratelimiting"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"aws-lambda"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"bot-detection"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"correlation-id"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"datadog"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"galileo"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"ldap-auth"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"loggly"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"statsd"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"syslog"</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<hr>

<h3 id="retrieve-plugin-schema"><a class="header-link" href="#retrieve-plugin-schema" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Retrieve Plugin Schema</h3>

<p>Retrieve the schema of a plugin’s configuration. This is useful to
understand what fields a plugin accepts, and can be used for building
third-party integrations to the Kong’s plugin system.</p>

<div class="endpoint get">/plugins/schema/{plugin name}</div>

<p><em>Response</em></p>

<div><div class="highlight"><pre class="highlight"><code>HTTP 200 OK
</code></pre></div></div>

<div><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"fields"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"hide_credentials"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"default"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"boolean"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"key_names"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"default"</span><span class="p">:</span><span class="w"> </span><span class="s2">"function"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"required"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"array"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<hr>

<h2 id="certificate-object"><a class="header-link" href="#certificate-object" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Certificate Object</h2>

<p>A certificate object represents a public certificate, and can be optionally paired with the
corresponding private key. These objects are used by Kong to handle SSL/TLS termination for
encrypted requests, or for use as a trusted CA store when validating peer certificate of
client/service. Certificates are optionally associated with SNI objects to
tie a cert/key pair to one or more hostnames.</p>

<p>Certificates can be both <a href="#tags">tagged and filtered by tags</a>.</p>

<div><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ce44eef5-41ed-47f6-baab-f725cecf98c7"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1422386534</span><span class="p">,</span><span class="w">
    </span><span class="s2">"cert"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-----BEGIN CERTIFICATE-----..."</span><span class="p">,</span><span class="w">
    </span><span class="s2">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-----BEGIN RSA PRIVATE KEY-----..."</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"user-level"</span><span class="p">,</span><span class="w"> </span><span class="s2">"low-priority"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div></div>

<h3 id="add-certificate"><a class="header-link" href="#add-certificate" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Add Certificate</h3>

<h5 id="create-certificate"><a class="header-link" href="#create-certificate" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Create Certificate</h5>

<div class="endpoint post">/certificates</div>

<p><em>Request Body</em></p>

<table>
  <thead>
    <tr>
      <th style="text-align: right">Attributes</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right"><code>cert</code></td>
      <td>PEM-encoded public certificate of the SSL key pair.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>key</code></td>
      <td>PEM-encoded private key of the SSL key pair.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>tags</code><br><em>optional</em></td>
      <td>An optional set of strings associated with the Certificate, for grouping and filtering.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>snis</code><br><em>shorthand-attribute</em></td>
      <td>An array of zero or more hostnames to associate with this certificate as SNIs. This is a sugar parameter that will, under the hood, create an SNI object and associate it with this certificate for your convenience. To set this attribute this certificate must have a valid private key associated with it.</td>
    </tr>
  </tbody>
</table>

<p><em>Response</em></p>

<div><div class="highlight"><pre class="highlight"><code>HTTP 201 Created
</code></pre></div></div>

<div><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ce44eef5-41ed-47f6-baab-f725cecf98c7"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1422386534</span><span class="p">,</span><span class="w">
    </span><span class="s2">"cert"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-----BEGIN CERTIFICATE-----..."</span><span class="p">,</span><span class="w">
    </span><span class="s2">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-----BEGIN RSA PRIVATE KEY-----..."</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"user-level"</span><span class="p">,</span><span class="w"> </span><span class="s2">"low-priority"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div></div>

<hr>

<h3 id="list-certificates"><a class="header-link" href="#list-certificates" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>List Certificates</h3>

<h5 id="list-all-certificates"><a class="header-link" href="#list-all-certificates" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>List All Certificates</h5>

<div class="endpoint get">/certificates</div>

<p><em>Response</em></p>

<div><div class="highlight"><pre class="highlight"><code>HTTP 200 OK
</code></pre></div></div>

<div><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
</span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"02621eee-8309-4bf6-b36b-a82017a5393e"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1422386534</span><span class="p">,</span><span class="w">
    </span><span class="s2">"cert"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-----BEGIN CERTIFICATE-----..."</span><span class="p">,</span><span class="w">
    </span><span class="s2">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-----BEGIN RSA PRIVATE KEY-----..."</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"user-level"</span><span class="p">,</span><span class="w"> </span><span class="s2">"low-priority"</span><span class="p">]</span><span class="w">
</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"66c7b5c4-4aaf-4119-af1e-ee3ad75d0af4"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1422386534</span><span class="p">,</span><span class="w">
    </span><span class="s2">"cert"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-----BEGIN CERTIFICATE-----..."</span><span class="p">,</span><span class="w">
    </span><span class="s2">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-----BEGIN RSA PRIVATE KEY-----..."</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"admin"</span><span class="p">,</span><span class="w"> </span><span class="s2">"high-priority"</span><span class="p">,</span><span class="w"> </span><span class="s2">"critical"</span><span class="p">]</span><span class="w">
</span><span class="p">}],</span><span class="w">

    </span><span class="s2">"next"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://localhost:8001/certificates?offset=6378122c-a0a1-438d-a5c6-efabae9fb969"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<hr>

<h3 id="retrieve-certificate"><a class="header-link" href="#retrieve-certificate" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Retrieve Certificate</h3>

<h5 id="retrieve-certificate-1"><a class="header-link" href="#retrieve-certificate-1" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Retrieve Certificate</h5>

<div class="endpoint get">/certificates/{certificate id}</div>

<table>
  <thead>
    <tr>
      <th style="text-align: right">Attributes</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right"><code>certificate id</code><br><strong>required</strong></td>
      <td>The unique identifier of the Certificate to retrieve.</td>
    </tr>
  </tbody>
</table>

<p><em>Response</em></p>

<div><div class="highlight"><pre class="highlight"><code>HTTP 200 OK
</code></pre></div></div>

<div><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ce44eef5-41ed-47f6-baab-f725cecf98c7"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1422386534</span><span class="p">,</span><span class="w">
    </span><span class="s2">"cert"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-----BEGIN CERTIFICATE-----..."</span><span class="p">,</span><span class="w">
    </span><span class="s2">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-----BEGIN RSA PRIVATE KEY-----..."</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"user-level"</span><span class="p">,</span><span class="w"> </span><span class="s2">"low-priority"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div></div>

<hr>

<h3 id="update-certificate"><a class="header-link" href="#update-certificate" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Update Certificate</h3>

<h5 id="update-certificate-1"><a class="header-link" href="#update-certificate-1" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Update Certificate</h5>

<div class="endpoint patch">/certificates/{certificate id}</div>

<table>
  <thead>
    <tr>
      <th style="text-align: right">Attributes</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right"><code>certificate id</code><br><strong>required</strong></td>
      <td>The unique identifier of the Certificate to update.</td>
    </tr>
  </tbody>
</table>

<p><em>Request Body</em></p>

<table>
  <thead>
    <tr>
      <th style="text-align: right">Attributes</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right"><code>cert</code></td>
      <td>PEM-encoded public certificate of the SSL key pair.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>key</code></td>
      <td>PEM-encoded private key of the SSL key pair.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>tags</code><br><em>optional</em></td>
      <td>An optional set of strings associated with the Certificate, for grouping and filtering.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>snis</code><br><em>shorthand-attribute</em></td>
      <td>An array of zero or more hostnames to associate with this certificate as SNIs. This is a sugar parameter that will, under the hood, create an SNI object and associate it with this certificate for your convenience. To set this attribute this certificate must have a valid private key associated with it.</td>
    </tr>
  </tbody>
</table>

<p><em>Response</em></p>

<div><div class="highlight"><pre class="highlight"><code>HTTP 200 OK
</code></pre></div></div>

<div><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ce44eef5-41ed-47f6-baab-f725cecf98c7"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1422386534</span><span class="p">,</span><span class="w">
    </span><span class="s2">"cert"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-----BEGIN CERTIFICATE-----..."</span><span class="p">,</span><span class="w">
    </span><span class="s2">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-----BEGIN RSA PRIVATE KEY-----..."</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"user-level"</span><span class="p">,</span><span class="w"> </span><span class="s2">"low-priority"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div></div>

<hr>

<h3 id="update-or-create-certificate"><a class="header-link" href="#update-or-create-certificate" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Update Or Create Certificate</h3>

<h5 id="create-or-update-certificate"><a class="header-link" href="#create-or-update-certificate" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Create Or Update Certificate</h5>

<div class="endpoint put">/certificates/{certificate id}</div>

<table>
  <thead>
    <tr>
      <th style="text-align: right">Attributes</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right"><code>certificate id</code><br><strong>required</strong></td>
      <td>The unique identifier of the Certificate to create or update.</td>
    </tr>
  </tbody>
</table>

<p><em>Request Body</em></p>

<table>
  <thead>
    <tr>
      <th style="text-align: right">Attributes</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right"><code>cert</code></td>
      <td>PEM-encoded public certificate of the SSL key pair.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>key</code></td>
      <td>PEM-encoded private key of the SSL key pair.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>tags</code><br><em>optional</em></td>
      <td>An optional set of strings associated with the Certificate, for grouping and filtering.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>snis</code><br><em>shorthand-attribute</em></td>
      <td>An array of zero or more hostnames to associate with this certificate as SNIs. This is a sugar parameter that will, under the hood, create an SNI object and associate it with this certificate for your convenience. To set this attribute this certificate must have a valid private key associated with it.</td>
    </tr>
  </tbody>
</table>

<p>Inserts (or replaces) the Certificate under the requested resource with the
definition specified in the body. The Certificate will be identified via the <code>name
or id</code> attribute.</p>

<p>When the <code>name or id</code> attribute has the structure of a UUID, the Certificate being
inserted/replaced will be identified by its <code>id</code>. Otherwise it will be
identified by its <code>name</code>.</p>

<p>When creating a new Certificate without specifying <code>id</code> (neither in the URL nor in
the body), then it will be auto-generated.</p>

<p>Notice that specifying a <code>name</code> in the URL and a different one in the request
body is not allowed.</p>

<p><em>Response</em></p>

<div><div class="highlight"><pre class="highlight"><code>HTTP 201 Created or HTTP 200 OK
</code></pre></div></div>

<p>See POST and PATCH responses.</p>

<hr>

<h3 id="delete-certificate"><a class="header-link" href="#delete-certificate" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Delete Certificate</h3>

<h5 id="delete-certificate-1"><a class="header-link" href="#delete-certificate-1" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Delete Certificate</h5>

<div class="endpoint delete">/certificates/{certificate id}</div>

<table>
  <thead>
    <tr>
      <th style="text-align: right">Attributes</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right"><code>certificate id</code><br><strong>required</strong></td>
      <td>The unique identifier of the Certificate to delete.</td>
    </tr>
  </tbody>
</table>

<p><em>Response</em></p>

<div><div class="highlight"><pre class="highlight"><code>HTTP 204 No Content
</code></pre></div></div>

<hr>

<h2 id="sni-object"><a class="header-link" href="#sni-object" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>SNI Object</h2>

<p>An SNI object represents a many-to-one mapping of hostnames to a certificate.
That is, a certificate object can have many hostnames associated with it; when
Kong receives an SSL request, it uses the SNI field in the Client Hello to
lookup the certificate object based on the SNI associated with the certificate.</p>

<p>SNIs can be both <a href="#tags">tagged and filtered by tags</a>.</p>

<div><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7fca84d6-7d37-4a74-a7b0-93e576089a41"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my-sni"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1422386534</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"user-level"</span><span class="p">,</span><span class="w"> </span><span class="s2">"low-priority"</span><span class="p">],</span><span class="w">
    </span><span class="s2">"certificate"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"id"</span><span class="p">:</span><span class="s2">"d044b7d4-3dc2-4bbc-8e9f-6b7a69416df6"</span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div></div>

<h3 id="add-sni"><a class="header-link" href="#add-sni" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Add SNI</h3>

<h5 id="create-sni"><a class="header-link" href="#create-sni" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Create SNI</h5>

<div class="endpoint post">/snis</div>

<h5 id="create-sni-associated-to-a-specific-certificate"><a class="header-link" href="#create-sni-associated-to-a-specific-certificate" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Create SNI Associated to a Specific Certificate</h5>

<div class="endpoint post">/certificates/{certificate name or id}/snis</div>

<table>
  <thead>
    <tr>
      <th style="text-align: right">Attributes</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right"><code>certificate name or id</code><br><strong>required</strong></td>
      <td>The unique identifier or the <code>name</code> attribute of the Certificate that should be associated to the newly-created SNI.</td>
    </tr>
  </tbody>
</table>

<p><em>Request Body</em></p>

<table>
  <thead>
    <tr>
      <th style="text-align: right">Attributes</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right"><code>name</code></td>
      <td>The SNI name to associate with the given certificate. May contain a single wildcard in the leftmost (suffix) or rightmost (prefix) position. This can be helpful when maintaining multiple subdomains, as a single SNI configured with a wildcard name can be used to match multiple subdomains, instead of creating an SNI entity for each. Valid wildcard positions are <code>mydomain.*</code>, <code>*.mydomain.com</code>, and <code>*.www.mydomain.com</code>. Plain SNI names (no wildcard) take priority when matching, followed by prefix and then suffix.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>tags</code><br><em>optional</em></td>
      <td>An optional set of strings associated with the SNIs, for grouping and filtering.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>certificate</code></td>
      <td>The id (a UUID) of the certificate with which to associate the SNI hostname. The Certificate must have a valid private key associated with it to be used by the SNI object.  With form-encoded, the notation is <code>certificate.id=&lt;certificate_id&gt;</code>. With JSON, use <code>"certificate":{"id":"&lt;certificate_id&gt;"}</code>.</td>
    </tr>
  </tbody>
</table>

<p><em>Response</em></p>

<div><div class="highlight"><pre class="highlight"><code>HTTP 201 Created
</code></pre></div></div>

<div><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7fca84d6-7d37-4a74-a7b0-93e576089a41"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my-sni"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1422386534</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"user-level"</span><span class="p">,</span><span class="w"> </span><span class="s2">"low-priority"</span><span class="p">],</span><span class="w">
    </span><span class="s2">"certificate"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"id"</span><span class="p">:</span><span class="s2">"d044b7d4-3dc2-4bbc-8e9f-6b7a69416df6"</span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div></div>

<hr>

<h3 id="list-snis"><a class="header-link" href="#list-snis" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>List SNIs</h3>

<h5 id="list-all-snis"><a class="header-link" href="#list-all-snis" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>List All SNIs</h5>

<div class="endpoint get">/snis</div>

<h5 id="list-snis-associated-to-a-specific-certificate"><a class="header-link" href="#list-snis-associated-to-a-specific-certificate" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>List SNIs Associated to a Specific Certificate</h5>

<div class="endpoint get">/certificates/{certificate name or id}/snis</div>

<table>
  <thead>
    <tr>
      <th style="text-align: right">Attributes</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right"><code>certificate name or id</code><br><strong>required</strong></td>
      <td>The unique identifier or the <code>name</code> attribute of the Certificate whose SNIs are to be retrieved. When using this endpoint, only SNIs associated to the specified Certificate will be listed.</td>
    </tr>
  </tbody>
</table>

<p><em>Response</em></p>

<div><div class="highlight"><pre class="highlight"><code>HTTP 200 OK
</code></pre></div></div>

<div><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
</span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a9b2107f-a214-47b3-add4-46b942187924"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my-sni"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1422386534</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"user-level"</span><span class="p">,</span><span class="w"> </span><span class="s2">"low-priority"</span><span class="p">],</span><span class="w">
    </span><span class="s2">"certificate"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"id"</span><span class="p">:</span><span class="s2">"04fbeacf-a9f1-4a5d-ae4a-b0407445db3f"</span><span class="p">}</span><span class="w">
</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"43429efd-b3a5-4048-94cb-5cc4029909bb"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my-sni"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1422386534</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"admin"</span><span class="p">,</span><span class="w"> </span><span class="s2">"high-priority"</span><span class="p">,</span><span class="w"> </span><span class="s2">"critical"</span><span class="p">],</span><span class="w">
    </span><span class="s2">"certificate"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"id"</span><span class="p">:</span><span class="s2">"d26761d5-83a4-4f24-ac6c-cff276f2b79c"</span><span class="p">}</span><span class="w">
</span><span class="p">}],</span><span class="w">

    </span><span class="s2">"next"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://localhost:8001/snis?offset=6378122c-a0a1-438d-a5c6-efabae9fb969"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<hr>

<h3 id="retrieve-sni"><a class="header-link" href="#retrieve-sni" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Retrieve SNI</h3>

<h5 id="retrieve-sni-1"><a class="header-link" href="#retrieve-sni-1" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Retrieve SNI</h5>

<div class="endpoint get">/snis/{name or id}</div>

<table>
  <thead>
    <tr>
      <th style="text-align: right">Attributes</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right"><code>name or id</code><br><strong>required</strong></td>
      <td>The unique identifier <strong>or</strong> the name of the SNI to retrieve.</td>
    </tr>
  </tbody>
</table>

<p><em>Response</em></p>

<div><div class="highlight"><pre class="highlight"><code>HTTP 200 OK
</code></pre></div></div>

<div><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7fca84d6-7d37-4a74-a7b0-93e576089a41"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my-sni"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1422386534</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"user-level"</span><span class="p">,</span><span class="w"> </span><span class="s2">"low-priority"</span><span class="p">],</span><span class="w">
    </span><span class="s2">"certificate"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"id"</span><span class="p">:</span><span class="s2">"d044b7d4-3dc2-4bbc-8e9f-6b7a69416df6"</span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div></div>

<hr>

<h3 id="update-sni"><a class="header-link" href="#update-sni" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Update SNI</h3>

<h5 id="update-sni-1"><a class="header-link" href="#update-sni-1" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Update SNI</h5>

<div class="endpoint patch">/snis/{name or id}</div>

<table>
  <thead>
    <tr>
      <th style="text-align: right">Attributes</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right"><code>name or id</code><br><strong>required</strong></td>
      <td>The unique identifier <strong>or</strong> the name of the SNI to update.</td>
    </tr>
  </tbody>
</table>

<p><em>Request Body</em></p>

<table>
  <thead>
    <tr>
      <th style="text-align: right">Attributes</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right"><code>name</code></td>
      <td>The SNI name to associate with the given certificate. May contain a single wildcard in the leftmost (suffix) or rightmost (prefix) position. This can be helpful when maintaining multiple subdomains, as a single SNI configured with a wildcard name can be used to match multiple subdomains, instead of creating an SNI entity for each. Valid wildcard positions are <code>mydomain.*</code>, <code>*.mydomain.com</code>, and <code>*.www.mydomain.com</code>. Plain SNI names (no wildcard) take priority when matching, followed by prefix and then suffix.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>tags</code><br><em>optional</em></td>
      <td>An optional set of strings associated with the SNIs, for grouping and filtering.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>certificate</code></td>
      <td>The id (a UUID) of the certificate with which to associate the SNI hostname. The Certificate must have a valid private key associated with it to be used by the SNI object.  With form-encoded, the notation is <code>certificate.id=&lt;certificate_id&gt;</code>. With JSON, use <code>"certificate":{"id":"&lt;certificate_id&gt;"}</code>.</td>
    </tr>
  </tbody>
</table>

<p><em>Response</em></p>

<div><div class="highlight"><pre class="highlight"><code>HTTP 200 OK
</code></pre></div></div>

<div><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7fca84d6-7d37-4a74-a7b0-93e576089a41"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my-sni"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1422386534</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"user-level"</span><span class="p">,</span><span class="w"> </span><span class="s2">"low-priority"</span><span class="p">],</span><span class="w">
    </span><span class="s2">"certificate"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"id"</span><span class="p">:</span><span class="s2">"d044b7d4-3dc2-4bbc-8e9f-6b7a69416df6"</span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div></div>

<hr>

<h3 id="update-or-create-sni"><a class="header-link" href="#update-or-create-sni" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Update Or Create SNI</h3>

<h5 id="create-or-update-sni"><a class="header-link" href="#create-or-update-sni" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Create Or Update SNI</h5>

<div class="endpoint put">/snis/{name or id}</div>

<table>
  <thead>
    <tr>
      <th style="text-align: right">Attributes</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right"><code>name or id</code><br><strong>required</strong></td>
      <td>The unique identifier <strong>or</strong> the name of the SNI to create or update.</td>
    </tr>
  </tbody>
</table>

<p><em>Request Body</em></p>

<table>
  <thead>
    <tr>
      <th style="text-align: right">Attributes</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right"><code>name</code></td>
      <td>The SNI name to associate with the given certificate. May contain a single wildcard in the leftmost (suffix) or rightmost (prefix) position. This can be helpful when maintaining multiple subdomains, as a single SNI configured with a wildcard name can be used to match multiple subdomains, instead of creating an SNI entity for each. Valid wildcard positions are <code>mydomain.*</code>, <code>*.mydomain.com</code>, and <code>*.www.mydomain.com</code>. Plain SNI names (no wildcard) take priority when matching, followed by prefix and then suffix.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>tags</code><br><em>optional</em></td>
      <td>An optional set of strings associated with the SNIs, for grouping and filtering.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>certificate</code></td>
      <td>The id (a UUID) of the certificate with which to associate the SNI hostname. The Certificate must have a valid private key associated with it to be used by the SNI object.  With form-encoded, the notation is <code>certificate.id=&lt;certificate_id&gt;</code>. With JSON, use <code>"certificate":{"id":"&lt;certificate_id&gt;"}</code>.</td>
    </tr>
  </tbody>
</table>

<p>Inserts (or replaces) the SNI under the requested resource with the
definition specified in the body. The SNI will be identified via the <code>name
or id</code> attribute.</p>

<p>When the <code>name or id</code> attribute has the structure of a UUID, the SNI being
inserted/replaced will be identified by its <code>id</code>. Otherwise it will be
identified by its <code>name</code>.</p>

<p>When creating a new SNI without specifying <code>id</code> (neither in the URL nor in
the body), then it will be auto-generated.</p>

<p>Notice that specifying a <code>name</code> in the URL and a different one in the request
body is not allowed.</p>

<p><em>Response</em></p>

<div><div class="highlight"><pre class="highlight"><code>HTTP 201 Created or HTTP 200 OK
</code></pre></div></div>

<p>See POST and PATCH responses.</p>

<hr>

<h3 id="delete-sni"><a class="header-link" href="#delete-sni" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Delete SNI</h3>

<h5 id="delete-sni-1"><a class="header-link" href="#delete-sni-1" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Delete SNI</h5>

<div class="endpoint delete">/snis/{name or id}</div>

<table>
  <thead>
    <tr>
      <th style="text-align: right">Attributes</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right"><code>name or id</code><br><strong>required</strong></td>
      <td>The unique identifier <strong>or</strong> the name of the SNI to delete.</td>
    </tr>
  </tbody>
</table>

<p><em>Response</em></p>

<div><div class="highlight"><pre class="highlight"><code>HTTP 204 No Content
</code></pre></div></div>

<hr>

<h2 id="upstream-object"><a class="header-link" href="#upstream-object" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Upstream Object</h2>

<p>The upstream object represents a virtual hostname and can be used to loadbalance
incoming requests over multiple services (targets). So for example an upstream
named <code>service.v1.xyz</code> for a Service object whose <code>host</code> is <code>service.v1.xyz</code>.
Requests for this Service would be proxied to the targets defined within the upstream.</p>

<p>An upstream also includes a <a href="/1.2.x/health-checks-circuit-breakers">health checker</a>, which is able to
enable and disable targets based on their ability or inability to serve
requests. The configuration for the health checker is stored in the upstream
object, and applies to all of its targets.</p>

<p>Upstreams can be both <a href="#tags">tagged and filtered by tags</a>.</p>

<div><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"91020192-062d-416f-a275-9addeeaffaf2"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1422386534</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my-upstream"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"hash_on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"none"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"hash_fallback"</span><span class="p">:</span><span class="w"> </span><span class="s2">"none"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"hash_on_cookie_path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"slots"</span><span class="p">:</span><span class="w"> </span><span class="mi">10000</span><span class="p">,</span><span class="w">
    </span><span class="s2">"healthchecks"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"active"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"https_verify_certificate"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="s2">"unhealthy"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"http_statuses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">429</span><span class="p">,</span><span class="w"> </span><span class="mi">404</span><span class="p">,</span><span class="w"> </span><span class="mi">500</span><span class="p">,</span><span class="w"> </span><span class="mi">501</span><span class="p">,</span><span class="w"> </span><span class="mi">502</span><span class="p">,</span><span class="w"> </span><span class="mi">503</span><span class="p">,</span><span class="w"> </span><span class="mi">504</span><span class="p">,</span><span class="w"> </span><span class="mi">505</span><span class="p">],</span><span class="w">
                </span><span class="s2">"tcp_failures"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="s2">"timeouts"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="s2">"http_failures"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="s2">"interval"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"http_path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"timeout"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
            </span><span class="s2">"healthy"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"http_statuses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="mi">302</span><span class="p">],</span><span class="w">
                </span><span class="s2">"interval"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="s2">"successes"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"https_sni"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example.com"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"concurrency"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"passive"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"unhealthy"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"http_failures"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="s2">"http_statuses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">429</span><span class="p">,</span><span class="w"> </span><span class="mi">500</span><span class="p">,</span><span class="w"> </span><span class="mi">503</span><span class="p">],</span><span class="w">
                </span><span class="s2">"tcp_failures"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="s2">"timeouts"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"healthy"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"successes"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="s2">"http_statuses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="mi">201</span><span class="p">,</span><span class="w"> </span><span class="mi">202</span><span class="p">,</span><span class="w"> </span><span class="mi">203</span><span class="p">,</span><span class="w"> </span><span class="mi">204</span><span class="p">,</span><span class="w"> </span><span class="mi">205</span><span class="p">,</span><span class="w"> </span><span class="mi">206</span><span class="p">,</span><span class="w"> </span><span class="mi">207</span><span class="p">,</span><span class="w"> </span><span class="mi">208</span><span class="p">,</span><span class="w"> </span><span class="mi">226</span><span class="p">,</span><span class="w"> </span><span class="mi">300</span><span class="p">,</span><span class="w"> </span><span class="mi">301</span><span class="p">,</span><span class="w"> </span><span class="mi">302</span><span class="p">,</span><span class="w"> </span><span class="mi">303</span><span class="p">,</span><span class="w"> </span><span class="mi">304</span><span class="p">,</span><span class="w"> </span><span class="mi">305</span><span class="p">,</span><span class="w"> </span><span class="mi">306</span><span class="p">,</span><span class="w"> </span><span class="mi">307</span><span class="p">,</span><span class="w"> </span><span class="mi">308</span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"user-level"</span><span class="p">,</span><span class="w"> </span><span class="s2">"low-priority"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div></div>

<h3 id="add-upstream"><a class="header-link" href="#add-upstream" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Add Upstream</h3>

<h5 id="create-upstream"><a class="header-link" href="#create-upstream" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Create Upstream</h5>

<div class="endpoint post">/upstreams</div>

<p><em>Request Body</em></p>

<table>
  <thead>
    <tr>
      <th style="text-align: right">Attributes</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right"><code>name</code></td>
      <td>This is a hostname, which must be equal to the <code>host</code> of a Service.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>hash_on</code><br><em>optional</em></td>
      <td>What to use as hashing input: <code>none</code> (resulting in a weighted-round-robin scheme with no hashing), <code>consumer</code>, <code>ip</code>, <code>header</code>, or <code>cookie</code>. Defaults to <code>"none"</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>hash_fallback</code><br><em>optional</em></td>
      <td>What to use as hashing input if the primary <code>hash_on</code> does not return a hash (eg. header is missing, or no consumer identified). One of: <code>none</code>, <code>consumer</code>, <code>ip</code>, <code>header</code>, or <code>cookie</code>. Not available if <code>hash_on</code> is set to <code>cookie</code>. Defaults to <code>"none"</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>hash_on_header</code><br><em>semi-optional</em></td>
      <td>The header name to take the value from as hash input. Only required when <code>hash_on</code> is set to <code>header</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>hash_fallback_header</code><br><em>semi-optional</em></td>
      <td>The header name to take the value from as hash input. Only required when <code>hash_fallback</code> is set to <code>header</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>hash_on_cookie</code><br><em>semi-optional</em></td>
      <td>The cookie name to take the value from as hash input. Only required when <code>hash_on</code> or <code>hash_fallback</code> is set to <code>cookie</code>. If the specified cookie is not in the request, Kong will generate a value and set the cookie in the response.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>hash_on_cookie_path</code><br><em>semi-optional</em></td>
      <td>The cookie path to set in the response headers. Only required when <code>hash_on</code> or <code>hash_fallback</code> is set to <code>cookie</code>. Defaults to <code>"/"</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>slots</code><br><em>optional</em></td>
      <td>The number of slots in the loadbalancer algorithm (<code>10</code>-<code>65536</code>). Defaults to <code>10000</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>healthchecks.active.https_verify_certificate</code><br><em>optional</em></td>
      <td>Whether to check the validity of the SSL certificate of the remote host when performing active health checks using HTTPS. Defaults to <code>true</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>healthchecks.active.unhealthy.http_statuses</code><br><em>optional</em></td>
      <td>An array of HTTP statuses to consider a failure, indicating unhealthiness, when returned by a probe in active health checks. Defaults to <code>[429, 404, 500, 501, 502, 503, 504, 505]</code>. With form-encoded, the notation is <code>http_statuses[]=429&amp;http_statuses[]=404</code>. With JSON, use an Array.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>healthchecks.active.unhealthy.tcp_failures</code><br><em>optional</em></td>
      <td>Number of TCP failures in active probes to consider a target unhealthy. Defaults to <code>0</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>healthchecks.active.unhealthy.timeouts</code><br><em>optional</em></td>
      <td>Number of timeouts in active probes to consider a target unhealthy. Defaults to <code>0</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>healthchecks.active.unhealthy.http_failures</code><br><em>optional</em></td>
      <td>Number of HTTP failures in active probes (as defined by <code>healthchecks.active.unhealthy.http_statuses</code>) to consider a target unhealthy. Defaults to <code>0</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>healthchecks.active.unhealthy.interval</code><br><em>optional</em></td>
      <td>Interval between active health checks for unhealthy targets (in seconds). A value of zero indicates that active probes for unhealthy targets should not be performed. Defaults to <code>0</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>healthchecks.active.http_path</code><br><em>optional</em></td>
      <td>Path to use in GET HTTP request to run as a probe on active health checks. Defaults to <code>"/"</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>healthchecks.active.timeout</code><br><em>optional</em></td>
      <td>Socket timeout for active health checks (in seconds). Defaults to <code>1</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>healthchecks.active.healthy.http_statuses</code><br><em>optional</em></td>
      <td>An array of HTTP statuses to consider a success, indicating healthiness, when returned by a probe in active health checks. Defaults to <code>[200, 302]</code>. With form-encoded, the notation is <code>http_statuses[]=200&amp;http_statuses[]=302</code>. With JSON, use an Array.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>healthchecks.active.healthy.interval</code><br><em>optional</em></td>
      <td>Interval between active health checks for healthy targets (in seconds). A value of zero indicates that active probes for healthy targets should not be performed. Defaults to <code>0</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>healthchecks.active.healthy.successes</code><br><em>optional</em></td>
      <td>Number of successes in active probes (as defined by <code>healthchecks.active.healthy.http_statuses</code>) to consider a target healthy. Defaults to <code>0</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>healthchecks.active.https_sni</code><br><em>optional</em></td>
      <td>The hostname to use as an SNI (Server Name Identification) when performing active health checks using HTTPS. This is particularly useful when Targets are configured using IPs, so that the target host’s certificate can be verified with the proper SNI.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>healthchecks.active.concurrency</code><br><em>optional</em></td>
      <td>Number of targets to check concurrently in active health checks. Defaults to <code>10</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>healthchecks.active.type</code><br><em>optional</em></td>
      <td>Whether to perform active health checks using HTTP or HTTPS, or just attempt a TCP connection. Possible values are <code>tcp</code>, <code>http</code> or <code>https</code>. Defaults to <code>"http"</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>healthchecks.passive.unhealthy.http_failures</code><br><em>optional</em></td>
      <td>Number of HTTP failures in proxied traffic (as defined by <code>healthchecks.passive.unhealthy.http_statuses</code>) to consider a target unhealthy, as observed by passive health checks. Defaults to <code>0</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>healthchecks.passive.unhealthy.http_statuses</code><br><em>optional</em></td>
      <td>An array of HTTP statuses which represent unhealthiness when produced by proxied traffic, as observed by passive health checks. Defaults to <code>[429, 500, 503]</code>. With form-encoded, the notation is <code>http_statuses[]=429&amp;http_statuses[]=500</code>. With JSON, use an Array.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>healthchecks.passive.unhealthy.tcp_failures</code><br><em>optional</em></td>
      <td>Number of TCP failures in proxied traffic to consider a target unhealthy, as observed by passive health checks. Defaults to <code>0</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>healthchecks.passive.unhealthy.timeouts</code><br><em>optional</em></td>
      <td>Number of timeouts in proxied traffic to consider a target unhealthy, as observed by passive health checks. Defaults to <code>0</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>healthchecks.passive.type</code><br><em>optional</em></td>
      <td>Whether to perform passive health checks interpreting HTTP/HTTPS statuses, or just check for TCP connection success. Possible values are <code>tcp</code>, <code>http</code> or <code>https</code> (in passive checks, <code>http</code> and <code>https</code> options are equivalent.). Defaults to <code>"http"</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>healthchecks.passive.healthy.successes</code><br><em>optional</em></td>
      <td>Number of successes in proxied traffic (as defined by <code>healthchecks.passive.healthy.http_statuses</code>) to consider a target healthy, as observed by passive health checks. Defaults to <code>0</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>healthchecks.passive.healthy.http_statuses</code><br><em>optional</em></td>
      <td>An array of HTTP statuses which represent healthiness when produced by proxied traffic, as observed by passive health checks. Defaults to <code>[200, 201, 202, 203, 204, 205, 206, 207, 208, 226, 300, 301, 302, 303, 304, 305, 306, 307, 308]</code>. With form-encoded, the notation is <code>http_statuses[]=200&amp;http_statuses[]=201</code>. With JSON, use an Array.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>tags</code><br><em>optional</em></td>
      <td>An optional set of strings associated with the Upstream, for grouping and filtering.</td>
    </tr>
  </tbody>
</table>

<p><em>Response</em></p>

<div><div class="highlight"><pre class="highlight"><code>HTTP 201 Created
</code></pre></div></div>

<div><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"91020192-062d-416f-a275-9addeeaffaf2"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1422386534</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my-upstream"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"hash_on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"none"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"hash_fallback"</span><span class="p">:</span><span class="w"> </span><span class="s2">"none"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"hash_on_cookie_path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"slots"</span><span class="p">:</span><span class="w"> </span><span class="mi">10000</span><span class="p">,</span><span class="w">
    </span><span class="s2">"healthchecks"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"active"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"https_verify_certificate"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="s2">"unhealthy"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"http_statuses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">429</span><span class="p">,</span><span class="w"> </span><span class="mi">404</span><span class="p">,</span><span class="w"> </span><span class="mi">500</span><span class="p">,</span><span class="w"> </span><span class="mi">501</span><span class="p">,</span><span class="w"> </span><span class="mi">502</span><span class="p">,</span><span class="w"> </span><span class="mi">503</span><span class="p">,</span><span class="w"> </span><span class="mi">504</span><span class="p">,</span><span class="w"> </span><span class="mi">505</span><span class="p">],</span><span class="w">
                </span><span class="s2">"tcp_failures"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="s2">"timeouts"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="s2">"http_failures"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="s2">"interval"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"http_path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"timeout"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
            </span><span class="s2">"healthy"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"http_statuses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="mi">302</span><span class="p">],</span><span class="w">
                </span><span class="s2">"interval"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="s2">"successes"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"https_sni"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example.com"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"concurrency"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"passive"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"unhealthy"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"http_failures"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="s2">"http_statuses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">429</span><span class="p">,</span><span class="w"> </span><span class="mi">500</span><span class="p">,</span><span class="w"> </span><span class="mi">503</span><span class="p">],</span><span class="w">
                </span><span class="s2">"tcp_failures"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="s2">"timeouts"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"healthy"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"successes"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="s2">"http_statuses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="mi">201</span><span class="p">,</span><span class="w"> </span><span class="mi">202</span><span class="p">,</span><span class="w"> </span><span class="mi">203</span><span class="p">,</span><span class="w"> </span><span class="mi">204</span><span class="p">,</span><span class="w"> </span><span class="mi">205</span><span class="p">,</span><span class="w"> </span><span class="mi">206</span><span class="p">,</span><span class="w"> </span><span class="mi">207</span><span class="p">,</span><span class="w"> </span><span class="mi">208</span><span class="p">,</span><span class="w"> </span><span class="mi">226</span><span class="p">,</span><span class="w"> </span><span class="mi">300</span><span class="p">,</span><span class="w"> </span><span class="mi">301</span><span class="p">,</span><span class="w"> </span><span class="mi">302</span><span class="p">,</span><span class="w"> </span><span class="mi">303</span><span class="p">,</span><span class="w"> </span><span class="mi">304</span><span class="p">,</span><span class="w"> </span><span class="mi">305</span><span class="p">,</span><span class="w"> </span><span class="mi">306</span><span class="p">,</span><span class="w"> </span><span class="mi">307</span><span class="p">,</span><span class="w"> </span><span class="mi">308</span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"user-level"</span><span class="p">,</span><span class="w"> </span><span class="s2">"low-priority"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div></div>

<hr>

<h3 id="list-upstreams"><a class="header-link" href="#list-upstreams" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>List Upstreams</h3>

<h5 id="list-all-upstreams"><a class="header-link" href="#list-all-upstreams" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>List All Upstreams</h5>

<div class="endpoint get">/upstreams</div>

<p><em>Response</em></p>

<div><div class="highlight"><pre class="highlight"><code>HTTP 200 OK
</code></pre></div></div>

<div><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
</span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a2e013e8-7623-4494-a347-6d29108ff68b"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1422386534</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my-upstream"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"hash_on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"none"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"hash_fallback"</span><span class="p">:</span><span class="w"> </span><span class="s2">"none"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"hash_on_cookie_path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"slots"</span><span class="p">:</span><span class="w"> </span><span class="mi">10000</span><span class="p">,</span><span class="w">
    </span><span class="s2">"healthchecks"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"active"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"https_verify_certificate"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="s2">"unhealthy"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"http_statuses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">429</span><span class="p">,</span><span class="w"> </span><span class="mi">404</span><span class="p">,</span><span class="w"> </span><span class="mi">500</span><span class="p">,</span><span class="w"> </span><span class="mi">501</span><span class="p">,</span><span class="w"> </span><span class="mi">502</span><span class="p">,</span><span class="w"> </span><span class="mi">503</span><span class="p">,</span><span class="w"> </span><span class="mi">504</span><span class="p">,</span><span class="w"> </span><span class="mi">505</span><span class="p">],</span><span class="w">
                </span><span class="s2">"tcp_failures"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="s2">"timeouts"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="s2">"http_failures"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="s2">"interval"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"http_path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"timeout"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
            </span><span class="s2">"healthy"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"http_statuses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="mi">302</span><span class="p">],</span><span class="w">
                </span><span class="s2">"interval"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="s2">"successes"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"https_sni"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example.com"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"concurrency"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"passive"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"unhealthy"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"http_failures"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="s2">"http_statuses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">429</span><span class="p">,</span><span class="w"> </span><span class="mi">500</span><span class="p">,</span><span class="w"> </span><span class="mi">503</span><span class="p">],</span><span class="w">
                </span><span class="s2">"tcp_failures"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="s2">"timeouts"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"healthy"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"successes"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="s2">"http_statuses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="mi">201</span><span class="p">,</span><span class="w"> </span><span class="mi">202</span><span class="p">,</span><span class="w"> </span><span class="mi">203</span><span class="p">,</span><span class="w"> </span><span class="mi">204</span><span class="p">,</span><span class="w"> </span><span class="mi">205</span><span class="p">,</span><span class="w"> </span><span class="mi">206</span><span class="p">,</span><span class="w"> </span><span class="mi">207</span><span class="p">,</span><span class="w"> </span><span class="mi">208</span><span class="p">,</span><span class="w"> </span><span class="mi">226</span><span class="p">,</span><span class="w"> </span><span class="mi">300</span><span class="p">,</span><span class="w"> </span><span class="mi">301</span><span class="p">,</span><span class="w"> </span><span class="mi">302</span><span class="p">,</span><span class="w"> </span><span class="mi">303</span><span class="p">,</span><span class="w"> </span><span class="mi">304</span><span class="p">,</span><span class="w"> </span><span class="mi">305</span><span class="p">,</span><span class="w"> </span><span class="mi">306</span><span class="p">,</span><span class="w"> </span><span class="mi">307</span><span class="p">,</span><span class="w"> </span><span class="mi">308</span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"user-level"</span><span class="p">,</span><span class="w"> </span><span class="s2">"low-priority"</span><span class="p">]</span><span class="w">
</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"147f5ef0-1ed6-4711-b77f-489262f8bff7"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1422386534</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my-upstream"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"hash_on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"none"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"hash_fallback"</span><span class="p">:</span><span class="w"> </span><span class="s2">"none"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"hash_on_cookie_path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"slots"</span><span class="p">:</span><span class="w"> </span><span class="mi">10000</span><span class="p">,</span><span class="w">
    </span><span class="s2">"healthchecks"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"active"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"https_verify_certificate"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="s2">"unhealthy"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"http_statuses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">429</span><span class="p">,</span><span class="w"> </span><span class="mi">404</span><span class="p">,</span><span class="w"> </span><span class="mi">500</span><span class="p">,</span><span class="w"> </span><span class="mi">501</span><span class="p">,</span><span class="w"> </span><span class="mi">502</span><span class="p">,</span><span class="w"> </span><span class="mi">503</span><span class="p">,</span><span class="w"> </span><span class="mi">504</span><span class="p">,</span><span class="w"> </span><span class="mi">505</span><span class="p">],</span><span class="w">
                </span><span class="s2">"tcp_failures"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="s2">"timeouts"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="s2">"http_failures"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="s2">"interval"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"http_path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"timeout"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
            </span><span class="s2">"healthy"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"http_statuses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="mi">302</span><span class="p">],</span><span class="w">
                </span><span class="s2">"interval"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="s2">"successes"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"https_sni"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example.com"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"concurrency"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"passive"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"unhealthy"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"http_failures"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="s2">"http_statuses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">429</span><span class="p">,</span><span class="w"> </span><span class="mi">500</span><span class="p">,</span><span class="w"> </span><span class="mi">503</span><span class="p">],</span><span class="w">
                </span><span class="s2">"tcp_failures"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="s2">"timeouts"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"healthy"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"successes"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="s2">"http_statuses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="mi">201</span><span class="p">,</span><span class="w"> </span><span class="mi">202</span><span class="p">,</span><span class="w"> </span><span class="mi">203</span><span class="p">,</span><span class="w"> </span><span class="mi">204</span><span class="p">,</span><span class="w"> </span><span class="mi">205</span><span class="p">,</span><span class="w"> </span><span class="mi">206</span><span class="p">,</span><span class="w"> </span><span class="mi">207</span><span class="p">,</span><span class="w"> </span><span class="mi">208</span><span class="p">,</span><span class="w"> </span><span class="mi">226</span><span class="p">,</span><span class="w"> </span><span class="mi">300</span><span class="p">,</span><span class="w"> </span><span class="mi">301</span><span class="p">,</span><span class="w"> </span><span class="mi">302</span><span class="p">,</span><span class="w"> </span><span class="mi">303</span><span class="p">,</span><span class="w"> </span><span class="mi">304</span><span class="p">,</span><span class="w"> </span><span class="mi">305</span><span class="p">,</span><span class="w"> </span><span class="mi">306</span><span class="p">,</span><span class="w"> </span><span class="mi">307</span><span class="p">,</span><span class="w"> </span><span class="mi">308</span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"admin"</span><span class="p">,</span><span class="w"> </span><span class="s2">"high-priority"</span><span class="p">,</span><span class="w"> </span><span class="s2">"critical"</span><span class="p">]</span><span class="w">
</span><span class="p">}],</span><span class="w">

    </span><span class="s2">"next"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://localhost:8001/upstreams?offset=6378122c-a0a1-438d-a5c6-efabae9fb969"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<hr>

<h3 id="retrieve-upstream"><a class="header-link" href="#retrieve-upstream" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Retrieve Upstream</h3>

<h5 id="retrieve-upstream-1"><a class="header-link" href="#retrieve-upstream-1" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Retrieve Upstream</h5>

<div class="endpoint get">/upstreams/{name or id}</div>

<table>
  <thead>
    <tr>
      <th style="text-align: right">Attributes</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right"><code>name or id</code><br><strong>required</strong></td>
      <td>The unique identifier <strong>or</strong> the name of the Upstream to retrieve.</td>
    </tr>
  </tbody>
</table>

<h5 id="retrieve-upstream-associated-to-a-specific-target"><a class="header-link" href="#retrieve-upstream-associated-to-a-specific-target" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Retrieve Upstream Associated to a Specific Target</h5>

<div class="endpoint get">/targets/{target host:port or id}/upstream</div>

<table>
  <thead>
    <tr>
      <th style="text-align: right">Attributes</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right"><code>target host:port or id</code><br><strong>required</strong></td>
      <td>The unique identifier <strong>or</strong> the host:port of the Target associated to the Upstream to be retrieved.</td>
    </tr>
  </tbody>
</table>

<p><em>Response</em></p>

<div><div class="highlight"><pre class="highlight"><code>HTTP 200 OK
</code></pre></div></div>

<div><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"91020192-062d-416f-a275-9addeeaffaf2"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1422386534</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my-upstream"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"hash_on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"none"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"hash_fallback"</span><span class="p">:</span><span class="w"> </span><span class="s2">"none"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"hash_on_cookie_path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"slots"</span><span class="p">:</span><span class="w"> </span><span class="mi">10000</span><span class="p">,</span><span class="w">
    </span><span class="s2">"healthchecks"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"active"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"https_verify_certificate"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="s2">"unhealthy"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"http_statuses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">429</span><span class="p">,</span><span class="w"> </span><span class="mi">404</span><span class="p">,</span><span class="w"> </span><span class="mi">500</span><span class="p">,</span><span class="w"> </span><span class="mi">501</span><span class="p">,</span><span class="w"> </span><span class="mi">502</span><span class="p">,</span><span class="w"> </span><span class="mi">503</span><span class="p">,</span><span class="w"> </span><span class="mi">504</span><span class="p">,</span><span class="w"> </span><span class="mi">505</span><span class="p">],</span><span class="w">
                </span><span class="s2">"tcp_failures"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="s2">"timeouts"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="s2">"http_failures"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="s2">"interval"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"http_path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"timeout"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
            </span><span class="s2">"healthy"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"http_statuses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="mi">302</span><span class="p">],</span><span class="w">
                </span><span class="s2">"interval"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="s2">"successes"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"https_sni"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example.com"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"concurrency"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"passive"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"unhealthy"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"http_failures"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="s2">"http_statuses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">429</span><span class="p">,</span><span class="w"> </span><span class="mi">500</span><span class="p">,</span><span class="w"> </span><span class="mi">503</span><span class="p">],</span><span class="w">
                </span><span class="s2">"tcp_failures"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="s2">"timeouts"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"healthy"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"successes"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="s2">"http_statuses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="mi">201</span><span class="p">,</span><span class="w"> </span><span class="mi">202</span><span class="p">,</span><span class="w"> </span><span class="mi">203</span><span class="p">,</span><span class="w"> </span><span class="mi">204</span><span class="p">,</span><span class="w"> </span><span class="mi">205</span><span class="p">,</span><span class="w"> </span><span class="mi">206</span><span class="p">,</span><span class="w"> </span><span class="mi">207</span><span class="p">,</span><span class="w"> </span><span class="mi">208</span><span class="p">,</span><span class="w"> </span><span class="mi">226</span><span class="p">,</span><span class="w"> </span><span class="mi">300</span><span class="p">,</span><span class="w"> </span><span class="mi">301</span><span class="p">,</span><span class="w"> </span><span class="mi">302</span><span class="p">,</span><span class="w"> </span><span class="mi">303</span><span class="p">,</span><span class="w"> </span><span class="mi">304</span><span class="p">,</span><span class="w"> </span><span class="mi">305</span><span class="p">,</span><span class="w"> </span><span class="mi">306</span><span class="p">,</span><span class="w"> </span><span class="mi">307</span><span class="p">,</span><span class="w"> </span><span class="mi">308</span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"user-level"</span><span class="p">,</span><span class="w"> </span><span class="s2">"low-priority"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div></div>

<hr>

<h3 id="update-upstream"><a class="header-link" href="#update-upstream" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Update Upstream</h3>

<h5 id="update-upstream-1"><a class="header-link" href="#update-upstream-1" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Update Upstream</h5>

<div class="endpoint patch">/upstreams/{name or id}</div>

<table>
  <thead>
    <tr>
      <th style="text-align: right">Attributes</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right"><code>name or id</code><br><strong>required</strong></td>
      <td>The unique identifier <strong>or</strong> the name of the Upstream to update.</td>
    </tr>
  </tbody>
</table>

<h5 id="update-upstream-associated-to-a-specific-target"><a class="header-link" href="#update-upstream-associated-to-a-specific-target" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Update Upstream Associated to a Specific Target</h5>

<div class="endpoint patch">/targets/{target host:port or id}/upstream</div>

<table>
  <thead>
    <tr>
      <th style="text-align: right">Attributes</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right"><code>target host:port or id</code><br><strong>required</strong></td>
      <td>The unique identifier <strong>or</strong> the host:port of the Target associated to the Upstream to be updated.</td>
    </tr>
  </tbody>
</table>

<p><em>Request Body</em></p>

<table>
  <thead>
    <tr>
      <th style="text-align: right">Attributes</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right"><code>name</code></td>
      <td>This is a hostname, which must be equal to the <code>host</code> of a Service.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>hash_on</code><br><em>optional</em></td>
      <td>What to use as hashing input: <code>none</code> (resulting in a weighted-round-robin scheme with no hashing), <code>consumer</code>, <code>ip</code>, <code>header</code>, or <code>cookie</code>. Defaults to <code>"none"</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>hash_fallback</code><br><em>optional</em></td>
      <td>What to use as hashing input if the primary <code>hash_on</code> does not return a hash (eg. header is missing, or no consumer identified). One of: <code>none</code>, <code>consumer</code>, <code>ip</code>, <code>header</code>, or <code>cookie</code>. Not available if <code>hash_on</code> is set to <code>cookie</code>. Defaults to <code>"none"</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>hash_on_header</code><br><em>semi-optional</em></td>
      <td>The header name to take the value from as hash input. Only required when <code>hash_on</code> is set to <code>header</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>hash_fallback_header</code><br><em>semi-optional</em></td>
      <td>The header name to take the value from as hash input. Only required when <code>hash_fallback</code> is set to <code>header</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>hash_on_cookie</code><br><em>semi-optional</em></td>
      <td>The cookie name to take the value from as hash input. Only required when <code>hash_on</code> or <code>hash_fallback</code> is set to <code>cookie</code>. If the specified cookie is not in the request, Kong will generate a value and set the cookie in the response.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>hash_on_cookie_path</code><br><em>semi-optional</em></td>
      <td>The cookie path to set in the response headers. Only required when <code>hash_on</code> or <code>hash_fallback</code> is set to <code>cookie</code>. Defaults to <code>"/"</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>slots</code><br><em>optional</em></td>
      <td>The number of slots in the loadbalancer algorithm (<code>10</code>-<code>65536</code>). Defaults to <code>10000</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>healthchecks.active.https_verify_certificate</code><br><em>optional</em></td>
      <td>Whether to check the validity of the SSL certificate of the remote host when performing active health checks using HTTPS. Defaults to <code>true</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>healthchecks.active.unhealthy.http_statuses</code><br><em>optional</em></td>
      <td>An array of HTTP statuses to consider a failure, indicating unhealthiness, when returned by a probe in active health checks. Defaults to <code>[429, 404, 500, 501, 502, 503, 504, 505]</code>. With form-encoded, the notation is <code>http_statuses[]=429&amp;http_statuses[]=404</code>. With JSON, use an Array.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>healthchecks.active.unhealthy.tcp_failures</code><br><em>optional</em></td>
      <td>Number of TCP failures in active probes to consider a target unhealthy. Defaults to <code>0</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>healthchecks.active.unhealthy.timeouts</code><br><em>optional</em></td>
      <td>Number of timeouts in active probes to consider a target unhealthy. Defaults to <code>0</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>healthchecks.active.unhealthy.http_failures</code><br><em>optional</em></td>
      <td>Number of HTTP failures in active probes (as defined by <code>healthchecks.active.unhealthy.http_statuses</code>) to consider a target unhealthy. Defaults to <code>0</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>healthchecks.active.unhealthy.interval</code><br><em>optional</em></td>
      <td>Interval between active health checks for unhealthy targets (in seconds). A value of zero indicates that active probes for unhealthy targets should not be performed. Defaults to <code>0</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>healthchecks.active.http_path</code><br><em>optional</em></td>
      <td>Path to use in GET HTTP request to run as a probe on active health checks. Defaults to <code>"/"</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>healthchecks.active.timeout</code><br><em>optional</em></td>
      <td>Socket timeout for active health checks (in seconds). Defaults to <code>1</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>healthchecks.active.healthy.http_statuses</code><br><em>optional</em></td>
      <td>An array of HTTP statuses to consider a success, indicating healthiness, when returned by a probe in active health checks. Defaults to <code>[200, 302]</code>. With form-encoded, the notation is <code>http_statuses[]=200&amp;http_statuses[]=302</code>. With JSON, use an Array.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>healthchecks.active.healthy.interval</code><br><em>optional</em></td>
      <td>Interval between active health checks for healthy targets (in seconds). A value of zero indicates that active probes for healthy targets should not be performed. Defaults to <code>0</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>healthchecks.active.healthy.successes</code><br><em>optional</em></td>
      <td>Number of successes in active probes (as defined by <code>healthchecks.active.healthy.http_statuses</code>) to consider a target healthy. Defaults to <code>0</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>healthchecks.active.https_sni</code><br><em>optional</em></td>
      <td>The hostname to use as an SNI (Server Name Identification) when performing active health checks using HTTPS. This is particularly useful when Targets are configured using IPs, so that the target host’s certificate can be verified with the proper SNI.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>healthchecks.active.concurrency</code><br><em>optional</em></td>
      <td>Number of targets to check concurrently in active health checks. Defaults to <code>10</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>healthchecks.active.type</code><br><em>optional</em></td>
      <td>Whether to perform active health checks using HTTP or HTTPS, or just attempt a TCP connection. Possible values are <code>tcp</code>, <code>http</code> or <code>https</code>. Defaults to <code>"http"</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>healthchecks.passive.unhealthy.http_failures</code><br><em>optional</em></td>
      <td>Number of HTTP failures in proxied traffic (as defined by <code>healthchecks.passive.unhealthy.http_statuses</code>) to consider a target unhealthy, as observed by passive health checks. Defaults to <code>0</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>healthchecks.passive.unhealthy.http_statuses</code><br><em>optional</em></td>
      <td>An array of HTTP statuses which represent unhealthiness when produced by proxied traffic, as observed by passive health checks. Defaults to <code>[429, 500, 503]</code>. With form-encoded, the notation is <code>http_statuses[]=429&amp;http_statuses[]=500</code>. With JSON, use an Array.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>healthchecks.passive.unhealthy.tcp_failures</code><br><em>optional</em></td>
      <td>Number of TCP failures in proxied traffic to consider a target unhealthy, as observed by passive health checks. Defaults to <code>0</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>healthchecks.passive.unhealthy.timeouts</code><br><em>optional</em></td>
      <td>Number of timeouts in proxied traffic to consider a target unhealthy, as observed by passive health checks. Defaults to <code>0</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>healthchecks.passive.type</code><br><em>optional</em></td>
      <td>Whether to perform passive health checks interpreting HTTP/HTTPS statuses, or just check for TCP connection success. Possible values are <code>tcp</code>, <code>http</code> or <code>https</code> (in passive checks, <code>http</code> and <code>https</code> options are equivalent.). Defaults to <code>"http"</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>healthchecks.passive.healthy.successes</code><br><em>optional</em></td>
      <td>Number of successes in proxied traffic (as defined by <code>healthchecks.passive.healthy.http_statuses</code>) to consider a target healthy, as observed by passive health checks. Defaults to <code>0</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>healthchecks.passive.healthy.http_statuses</code><br><em>optional</em></td>
      <td>An array of HTTP statuses which represent healthiness when produced by proxied traffic, as observed by passive health checks. Defaults to <code>[200, 201, 202, 203, 204, 205, 206, 207, 208, 226, 300, 301, 302, 303, 304, 305, 306, 307, 308]</code>. With form-encoded, the notation is <code>http_statuses[]=200&amp;http_statuses[]=201</code>. With JSON, use an Array.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>tags</code><br><em>optional</em></td>
      <td>An optional set of strings associated with the Upstream, for grouping and filtering.</td>
    </tr>
  </tbody>
</table>

<p><em>Response</em></p>

<div><div class="highlight"><pre class="highlight"><code>HTTP 200 OK
</code></pre></div></div>

<div><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"91020192-062d-416f-a275-9addeeaffaf2"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1422386534</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my-upstream"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"hash_on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"none"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"hash_fallback"</span><span class="p">:</span><span class="w"> </span><span class="s2">"none"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"hash_on_cookie_path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"slots"</span><span class="p">:</span><span class="w"> </span><span class="mi">10000</span><span class="p">,</span><span class="w">
    </span><span class="s2">"healthchecks"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"active"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"https_verify_certificate"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="s2">"unhealthy"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"http_statuses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">429</span><span class="p">,</span><span class="w"> </span><span class="mi">404</span><span class="p">,</span><span class="w"> </span><span class="mi">500</span><span class="p">,</span><span class="w"> </span><span class="mi">501</span><span class="p">,</span><span class="w"> </span><span class="mi">502</span><span class="p">,</span><span class="w"> </span><span class="mi">503</span><span class="p">,</span><span class="w"> </span><span class="mi">504</span><span class="p">,</span><span class="w"> </span><span class="mi">505</span><span class="p">],</span><span class="w">
                </span><span class="s2">"tcp_failures"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="s2">"timeouts"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="s2">"http_failures"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="s2">"interval"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"http_path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"timeout"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
            </span><span class="s2">"healthy"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"http_statuses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="mi">302</span><span class="p">],</span><span class="w">
                </span><span class="s2">"interval"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="s2">"successes"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"https_sni"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example.com"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"concurrency"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"passive"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"unhealthy"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"http_failures"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="s2">"http_statuses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">429</span><span class="p">,</span><span class="w"> </span><span class="mi">500</span><span class="p">,</span><span class="w"> </span><span class="mi">503</span><span class="p">],</span><span class="w">
                </span><span class="s2">"tcp_failures"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="s2">"timeouts"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"healthy"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"successes"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="s2">"http_statuses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="mi">201</span><span class="p">,</span><span class="w"> </span><span class="mi">202</span><span class="p">,</span><span class="w"> </span><span class="mi">203</span><span class="p">,</span><span class="w"> </span><span class="mi">204</span><span class="p">,</span><span class="w"> </span><span class="mi">205</span><span class="p">,</span><span class="w"> </span><span class="mi">206</span><span class="p">,</span><span class="w"> </span><span class="mi">207</span><span class="p">,</span><span class="w"> </span><span class="mi">208</span><span class="p">,</span><span class="w"> </span><span class="mi">226</span><span class="p">,</span><span class="w"> </span><span class="mi">300</span><span class="p">,</span><span class="w"> </span><span class="mi">301</span><span class="p">,</span><span class="w"> </span><span class="mi">302</span><span class="p">,</span><span class="w"> </span><span class="mi">303</span><span class="p">,</span><span class="w"> </span><span class="mi">304</span><span class="p">,</span><span class="w"> </span><span class="mi">305</span><span class="p">,</span><span class="w"> </span><span class="mi">306</span><span class="p">,</span><span class="w"> </span><span class="mi">307</span><span class="p">,</span><span class="w"> </span><span class="mi">308</span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"user-level"</span><span class="p">,</span><span class="w"> </span><span class="s2">"low-priority"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div></div>

<hr>

<h3 id="update-or-create-upstream"><a class="header-link" href="#update-or-create-upstream" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Update Or Create Upstream</h3>

<h5 id="create-or-update-upstream"><a class="header-link" href="#create-or-update-upstream" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Create Or Update Upstream</h5>

<div class="endpoint put">/upstreams/{name or id}</div>

<table>
  <thead>
    <tr>
      <th style="text-align: right">Attributes</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right"><code>name or id</code><br><strong>required</strong></td>
      <td>The unique identifier <strong>or</strong> the name of the Upstream to create or update.</td>
    </tr>
  </tbody>
</table>

<h5 id="create-or-update-upstream-associated-to-a-specific-target"><a class="header-link" href="#create-or-update-upstream-associated-to-a-specific-target" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Create Or Update Upstream Associated to a Specific Target</h5>

<div class="endpoint put">/targets/{target host:port or id}/upstream</div>

<table>
  <thead>
    <tr>
      <th style="text-align: right">Attributes</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right"><code>target host:port or id</code><br><strong>required</strong></td>
      <td>The unique identifier <strong>or</strong> the host:port of the Target associated to the Upstream to be created or updated.</td>
    </tr>
  </tbody>
</table>

<p><em>Request Body</em></p>

<table>
  <thead>
    <tr>
      <th style="text-align: right">Attributes</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right"><code>name</code></td>
      <td>This is a hostname, which must be equal to the <code>host</code> of a Service.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>hash_on</code><br><em>optional</em></td>
      <td>What to use as hashing input: <code>none</code> (resulting in a weighted-round-robin scheme with no hashing), <code>consumer</code>, <code>ip</code>, <code>header</code>, or <code>cookie</code>. Defaults to <code>"none"</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>hash_fallback</code><br><em>optional</em></td>
      <td>What to use as hashing input if the primary <code>hash_on</code> does not return a hash (eg. header is missing, or no consumer identified). One of: <code>none</code>, <code>consumer</code>, <code>ip</code>, <code>header</code>, or <code>cookie</code>. Not available if <code>hash_on</code> is set to <code>cookie</code>. Defaults to <code>"none"</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>hash_on_header</code><br><em>semi-optional</em></td>
      <td>The header name to take the value from as hash input. Only required when <code>hash_on</code> is set to <code>header</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>hash_fallback_header</code><br><em>semi-optional</em></td>
      <td>The header name to take the value from as hash input. Only required when <code>hash_fallback</code> is set to <code>header</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>hash_on_cookie</code><br><em>semi-optional</em></td>
      <td>The cookie name to take the value from as hash input. Only required when <code>hash_on</code> or <code>hash_fallback</code> is set to <code>cookie</code>. If the specified cookie is not in the request, Kong will generate a value and set the cookie in the response.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>hash_on_cookie_path</code><br><em>semi-optional</em></td>
      <td>The cookie path to set in the response headers. Only required when <code>hash_on</code> or <code>hash_fallback</code> is set to <code>cookie</code>. Defaults to <code>"/"</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>slots</code><br><em>optional</em></td>
      <td>The number of slots in the loadbalancer algorithm (<code>10</code>-<code>65536</code>). Defaults to <code>10000</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>healthchecks.active.https_verify_certificate</code><br><em>optional</em></td>
      <td>Whether to check the validity of the SSL certificate of the remote host when performing active health checks using HTTPS. Defaults to <code>true</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>healthchecks.active.unhealthy.http_statuses</code><br><em>optional</em></td>
      <td>An array of HTTP statuses to consider a failure, indicating unhealthiness, when returned by a probe in active health checks. Defaults to <code>[429, 404, 500, 501, 502, 503, 504, 505]</code>. With form-encoded, the notation is <code>http_statuses[]=429&amp;http_statuses[]=404</code>. With JSON, use an Array.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>healthchecks.active.unhealthy.tcp_failures</code><br><em>optional</em></td>
      <td>Number of TCP failures in active probes to consider a target unhealthy. Defaults to <code>0</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>healthchecks.active.unhealthy.timeouts</code><br><em>optional</em></td>
      <td>Number of timeouts in active probes to consider a target unhealthy. Defaults to <code>0</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>healthchecks.active.unhealthy.http_failures</code><br><em>optional</em></td>
      <td>Number of HTTP failures in active probes (as defined by <code>healthchecks.active.unhealthy.http_statuses</code>) to consider a target unhealthy. Defaults to <code>0</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>healthchecks.active.unhealthy.interval</code><br><em>optional</em></td>
      <td>Interval between active health checks for unhealthy targets (in seconds). A value of zero indicates that active probes for unhealthy targets should not be performed. Defaults to <code>0</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>healthchecks.active.http_path</code><br><em>optional</em></td>
      <td>Path to use in GET HTTP request to run as a probe on active health checks. Defaults to <code>"/"</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>healthchecks.active.timeout</code><br><em>optional</em></td>
      <td>Socket timeout for active health checks (in seconds). Defaults to <code>1</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>healthchecks.active.healthy.http_statuses</code><br><em>optional</em></td>
      <td>An array of HTTP statuses to consider a success, indicating healthiness, when returned by a probe in active health checks. Defaults to <code>[200, 302]</code>. With form-encoded, the notation is <code>http_statuses[]=200&amp;http_statuses[]=302</code>. With JSON, use an Array.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>healthchecks.active.healthy.interval</code><br><em>optional</em></td>
      <td>Interval between active health checks for healthy targets (in seconds). A value of zero indicates that active probes for healthy targets should not be performed. Defaults to <code>0</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>healthchecks.active.healthy.successes</code><br><em>optional</em></td>
      <td>Number of successes in active probes (as defined by <code>healthchecks.active.healthy.http_statuses</code>) to consider a target healthy. Defaults to <code>0</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>healthchecks.active.https_sni</code><br><em>optional</em></td>
      <td>The hostname to use as an SNI (Server Name Identification) when performing active health checks using HTTPS. This is particularly useful when Targets are configured using IPs, so that the target host’s certificate can be verified with the proper SNI.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>healthchecks.active.concurrency</code><br><em>optional</em></td>
      <td>Number of targets to check concurrently in active health checks. Defaults to <code>10</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>healthchecks.active.type</code><br><em>optional</em></td>
      <td>Whether to perform active health checks using HTTP or HTTPS, or just attempt a TCP connection. Possible values are <code>tcp</code>, <code>http</code> or <code>https</code>. Defaults to <code>"http"</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>healthchecks.passive.unhealthy.http_failures</code><br><em>optional</em></td>
      <td>Number of HTTP failures in proxied traffic (as defined by <code>healthchecks.passive.unhealthy.http_statuses</code>) to consider a target unhealthy, as observed by passive health checks. Defaults to <code>0</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>healthchecks.passive.unhealthy.http_statuses</code><br><em>optional</em></td>
      <td>An array of HTTP statuses which represent unhealthiness when produced by proxied traffic, as observed by passive health checks. Defaults to <code>[429, 500, 503]</code>. With form-encoded, the notation is <code>http_statuses[]=429&amp;http_statuses[]=500</code>. With JSON, use an Array.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>healthchecks.passive.unhealthy.tcp_failures</code><br><em>optional</em></td>
      <td>Number of TCP failures in proxied traffic to consider a target unhealthy, as observed by passive health checks. Defaults to <code>0</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>healthchecks.passive.unhealthy.timeouts</code><br><em>optional</em></td>
      <td>Number of timeouts in proxied traffic to consider a target unhealthy, as observed by passive health checks. Defaults to <code>0</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>healthchecks.passive.type</code><br><em>optional</em></td>
      <td>Whether to perform passive health checks interpreting HTTP/HTTPS statuses, or just check for TCP connection success. Possible values are <code>tcp</code>, <code>http</code> or <code>https</code> (in passive checks, <code>http</code> and <code>https</code> options are equivalent.). Defaults to <code>"http"</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>healthchecks.passive.healthy.successes</code><br><em>optional</em></td>
      <td>Number of successes in proxied traffic (as defined by <code>healthchecks.passive.healthy.http_statuses</code>) to consider a target healthy, as observed by passive health checks. Defaults to <code>0</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>healthchecks.passive.healthy.http_statuses</code><br><em>optional</em></td>
      <td>An array of HTTP statuses which represent healthiness when produced by proxied traffic, as observed by passive health checks. Defaults to <code>[200, 201, 202, 203, 204, 205, 206, 207, 208, 226, 300, 301, 302, 303, 304, 305, 306, 307, 308]</code>. With form-encoded, the notation is <code>http_statuses[]=200&amp;http_statuses[]=201</code>. With JSON, use an Array.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>tags</code><br><em>optional</em></td>
      <td>An optional set of strings associated with the Upstream, for grouping and filtering.</td>
    </tr>
  </tbody>
</table>

<p>Inserts (or replaces) the Upstream under the requested resource with the
definition specified in the body. The Upstream will be identified via the <code>name
or id</code> attribute.</p>

<p>When the <code>name or id</code> attribute has the structure of a UUID, the Upstream being
inserted/replaced will be identified by its <code>id</code>. Otherwise it will be
identified by its <code>name</code>.</p>

<p>When creating a new Upstream without specifying <code>id</code> (neither in the URL nor in
the body), then it will be auto-generated.</p>

<p>Notice that specifying a <code>name</code> in the URL and a different one in the request
body is not allowed.</p>

<p><em>Response</em></p>

<div><div class="highlight"><pre class="highlight"><code>HTTP 201 Created or HTTP 200 OK
</code></pre></div></div>

<p>See POST and PATCH responses.</p>

<hr>

<h3 id="delete-upstream"><a class="header-link" href="#delete-upstream" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Delete Upstream</h3>

<h5 id="delete-upstream-1"><a class="header-link" href="#delete-upstream-1" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Delete Upstream</h5>

<div class="endpoint delete">/upstreams/{name or id}</div>

<table>
  <thead>
    <tr>
      <th style="text-align: right">Attributes</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right"><code>name or id</code><br><strong>required</strong></td>
      <td>The unique identifier <strong>or</strong> the name of the Upstream to delete.</td>
    </tr>
  </tbody>
</table>

<h5 id="delete-upstream-associated-to-a-specific-target"><a class="header-link" href="#delete-upstream-associated-to-a-specific-target" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Delete Upstream Associated to a Specific Target</h5>

<div class="endpoint delete">/targets/{target host:port or id}/upstream</div>

<table>
  <thead>
    <tr>
      <th style="text-align: right">Attributes</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right"><code>target host:port or id</code><br><strong>required</strong></td>
      <td>The unique identifier <strong>or</strong> the host:port of the Target associated to the Upstream to be deleted.</td>
    </tr>
  </tbody>
</table>

<p><em>Response</em></p>

<div><div class="highlight"><pre class="highlight"><code>HTTP 204 No Content
</code></pre></div></div>

<hr>

<h3 id="show-upstream-health-for-node"><a class="header-link" href="#show-upstream-health-for-node" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Show Upstream Health for Node</h3>

<p>Displays the health status for all Targets of a given Upstream, according to
the perspective of a specific Kong node. Note that, being node-specific
information, making this same request to different nodes of the Kong cluster
may produce different results. For example, one specific node of the Kong
cluster may be experiencing network issues, causing it to fail to connect to
some Targets: these Targets will be marked as unhealthy by that node
(directing traffic from this node to other Targets that it can successfully
reach), but healthy to all others Kong nodes (which have no problems using that
Target).</p>

<p>The <code>data</code> field of the response contains an array of Target objects.
The health for each Target is returned in its <code>health</code> field:</p>

<ul>
  <li>If a Target fails to be activated in the ring balancer due to DNS issues,
its status displays as <code>DNS_ERROR</code>.</li>
  <li>When <a href="/1.2.x/health-checks-circuit-breakers">health checks</a> are not enabled in the Upstream
configuration, the health status for active Targets is displayed as
<code>HEALTHCHECKS_OFF</code>.</li>
  <li>When health checks are enabled and the Target is determined to be healthy,
either automatically or <a href="#set-target-as-healthy">manually</a>,
its status is displayed as <code>HEALTHY</code>. This means that this Target is
currently included in this Upstream’s load balancer ring.</li>
  <li>When a Target has been disabled by either active or passive health checks
(circuit breakers) or <a href="#set-target-as-unhealthy">manually</a>,
its status is displayed as <code>UNHEALTHY</code>. The load balancer is not directing
any traffic to this Target via this Upstream.</li>
</ul>

<div class="endpoint get">/upstreams/{name or id}/health/</div>

<table>
  <thead>
    <tr>
      <th style="text-align: right">Attributes</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right"><code>name or id</code><br><strong>required</strong></td>
      <td>The unique identifier <strong>or</strong> the name of the Upstream for which to display Target health.</td>
    </tr>
  </tbody>
</table>

<p><em>Response</em></p>

<div><div class="highlight"><pre class="highlight"><code>HTTP 200 OK
</code></pre></div></div>

<div><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="s2">"node_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cbb297c0-14a9-46bc-ad91-1d0ef9b42df9"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1485524883980</span><span class="p">,</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"18c0ad90-f942-4098-88db-bbee3e43b27f"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"health"</span><span class="p">:</span><span class="w"> </span><span class="s2">"HEALTHY"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"target"</span><span class="p">:</span><span class="w"> </span><span class="s2">"127.0.0.1:20000"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"upstream_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"07131005-ba30-4204-a29f-0927d53257b4"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"weight"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1485524914883</span><span class="p">,</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6c6f34eb-e6c3-4c1f-ac58-4060e5bca890"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"health"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UNHEALTHY"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"target"</span><span class="p">:</span><span class="w"> </span><span class="s2">"127.0.0.1:20002"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"upstream_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"07131005-ba30-4204-a29f-0927d53257b4"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"weight"</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<hr>

<h2 id="target-object"><a class="header-link" href="#target-object" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Target Object</h2>

<p>A target is an ip address/hostname with a port that identifies an instance of a backend
service. Every upstream can have many targets, and the targets can be
dynamically added. Changes are effectuated on the fly.</p>

<p>Because the upstream maintains a history of target changes, the targets cannot
be deleted or modified. To disable a target, post a new one with <code>weight=0</code>;
alternatively, use the <code>DELETE</code> convenience method to accomplish the same.</p>

<p>The current target object definition is the one with the latest <code>created_at</code>.</p>

<p>Targets can be both <a href="#tags">tagged and filtered by tags</a>.</p>

<div><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a3ad71a8-6685-4b03-a101-980a953544f6"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1422386534</span><span class="p">,</span><span class="w">
    </span><span class="s2">"upstream"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"id"</span><span class="p">:</span><span class="s2">"b87eb55d-69a1-41d2-8653-8d706eecefc0"</span><span class="p">},</span><span class="w">
    </span><span class="s2">"target"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example.com:8000"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"weight"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"user-level"</span><span class="p">,</span><span class="w"> </span><span class="s2">"low-priority"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div></div>

<h3 id="add-target"><a class="header-link" href="#add-target" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Add Target</h3>

<h5 id="create-target-associated-to-a-specific-upstream"><a class="header-link" href="#create-target-associated-to-a-specific-upstream" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Create Target Associated to a Specific Upstream</h5>

<div class="endpoint post">/upstreams/{upstream host:port or id}/targets</div>

<table>
  <thead>
    <tr>
      <th style="text-align: right">Attributes</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right"><code>upstream host:port or id</code><br><strong>required</strong></td>
      <td>The unique identifier or the <code>host:port</code> attribute of the Upstream that should be associated to the newly-created Target.</td>
    </tr>
  </tbody>
</table>

<p><em>Request Body</em></p>

<table>
  <thead>
    <tr>
      <th style="text-align: right">Attributes</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right"><code>target</code></td>
      <td>The target address (ip or hostname) and port. If the hostname resolves to an SRV record, the <code>port</code> value will be overridden by the value from the DNS record.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>weight</code><br><em>optional</em></td>
      <td>The weight this target gets within the upstream loadbalancer (<code>0</code>-<code>1000</code>). If the hostname resolves to an SRV record, the <code>weight</code> value will be overridden by the value from the DNS record.  Defaults to <code>100</code>.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>tags</code><br><em>optional</em></td>
      <td>An optional set of strings associated with the Target, for grouping and filtering.</td>
    </tr>
  </tbody>
</table>

<p><em>Response</em></p>

<div><div class="highlight"><pre class="highlight"><code>HTTP 201 Created
</code></pre></div></div>

<div><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a3ad71a8-6685-4b03-a101-980a953544f6"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1422386534</span><span class="p">,</span><span class="w">
    </span><span class="s2">"upstream"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"id"</span><span class="p">:</span><span class="s2">"b87eb55d-69a1-41d2-8653-8d706eecefc0"</span><span class="p">},</span><span class="w">
    </span><span class="s2">"target"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example.com:8000"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"weight"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"user-level"</span><span class="p">,</span><span class="w"> </span><span class="s2">"low-priority"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div></div>

<hr>

<h3 id="list-targets"><a class="header-link" href="#list-targets" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>List Targets</h3>

<h5 id="list-targets-associated-to-a-specific-upstream"><a class="header-link" href="#list-targets-associated-to-a-specific-upstream" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>List Targets Associated to a Specific Upstream</h5>

<div class="endpoint get">/upstreams/{upstream host:port or id}/targets</div>

<table>
  <thead>
    <tr>
      <th style="text-align: right">Attributes</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right"><code>upstream host:port or id</code><br><strong>required</strong></td>
      <td>The unique identifier or the <code>host:port</code> attribute of the Upstream whose Targets are to be retrieved. When using this endpoint, only Targets associated to the specified Upstream will be listed.</td>
    </tr>
  </tbody>
</table>

<p><em>Response</em></p>

<div><div class="highlight"><pre class="highlight"><code>HTTP 200 OK
</code></pre></div></div>

<div><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
</span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4e8d95d4-40f2-4818-adcb-30e00c349618"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1422386534</span><span class="p">,</span><span class="w">
    </span><span class="s2">"upstream"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"id"</span><span class="p">:</span><span class="s2">"58c8ccbb-eafb-4566-991f-2ed4f678fa70"</span><span class="p">},</span><span class="w">
    </span><span class="s2">"target"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example.com:8000"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"weight"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"user-level"</span><span class="p">,</span><span class="w"> </span><span class="s2">"low-priority"</span><span class="p">]</span><span class="w">
</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ea29aaa3-3b2d-488c-b90c-56df8e0dd8c6"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1422386534</span><span class="p">,</span><span class="w">
    </span><span class="s2">"upstream"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"id"</span><span class="p">:</span><span class="s2">"4fe14415-73d5-4f00-9fbc-c72a0fccfcb2"</span><span class="p">},</span><span class="w">
    </span><span class="s2">"target"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example.com:8000"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"weight"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"admin"</span><span class="p">,</span><span class="w"> </span><span class="s2">"high-priority"</span><span class="p">,</span><span class="w"> </span><span class="s2">"critical"</span><span class="p">]</span><span class="w">
</span><span class="p">}],</span><span class="w">

    </span><span class="s2">"next"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://localhost:8001/targets?offset=6378122c-a0a1-438d-a5c6-efabae9fb969"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<hr>

<h3 id="delete-target"><a class="header-link" href="#delete-target" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Delete Target</h3>

<p>Disable a target in the load balancer. Under the hood, this method creates
a new entry for the given target definition with a <code>weight</code> of 0.</p>

<div class="endpoint delete">/upstreams/{upstream name or id}/targets/{host:port or id}</div>

<table>
  <thead>
    <tr>
      <th style="text-align: right">Attributes</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right"><code>upstream name or id</code><br><strong>required</strong></td>
      <td>The unique identifier <strong>or</strong> the name of the upstream for which to delete the target.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>host:port or id</code><br><strong>required</strong></td>
      <td>The host:port combination element of the target to remove, or the <code>id</code> of an existing target entry.</td>
    </tr>
  </tbody>
</table>

<p><em>Response</em></p>

<div><div class="highlight"><pre class="highlight"><code>HTTP 204 No Content
</code></pre></div></div>

<hr>

<h3 id="set-target-as-healthy"><a class="header-link" href="#set-target-as-healthy" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Set Target As Healthy</h3>

<p>Set the current health status of a target in the load balancer to “healthy”
in the entire Kong cluster.</p>

<p>This endpoint can be used to manually re-enable a target that was previously
disabled by the upstream’s <a href="/1.2.x/health-checks-circuit-breakers">health checker</a>. Upstreams only
forward requests to healthy nodes, so this call tells Kong to start using this
target again.</p>

<p>This resets the health counters of the health checkers running in all workers
of the Kong node, and broadcasts a cluster-wide message so that the “healthy”
status is propagated to the whole Kong cluster.</p>

<div class="endpoint post">/upstreams/{upstream name or id}/targets/{target or id}/healthy</div>

<table>
  <thead>
    <tr>
      <th style="text-align: right">Attributes</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right"><code>upstream name or id</code><br><strong>required</strong></td>
      <td>The unique identifier <strong>or</strong> the name of the upstream.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>target or id</code><br><strong>required</strong></td>
      <td>The host/port combination element of the target to set as healthy, or the <code>id</code> of an existing target entry.</td>
    </tr>
  </tbody>
</table>

<p><em>Response</em></p>

<div><div class="highlight"><pre class="highlight"><code>HTTP 204 No Content
</code></pre></div></div>

<hr>

<h3 id="set-target-as-unhealthy"><a class="header-link" href="#set-target-as-unhealthy" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>Set Target As Unhealthy</h3>

<p>Set the current health status of a target in the load balancer to “unhealthy”
in the entire Kong cluster.</p>

<p>This endpoint can be used to manually disable a target and have it stop
responding to requests. Upstreams only forward requests to healthy nodes, so
this call tells Kong to start skipping this target in the ring-balancer
algorithm.</p>

<p>This call resets the health counters of the health checkers running in all
workers of the Kong node, and broadcasts a cluster-wide message so that the
“unhealthy” status is propagated to the whole Kong cluster.</p>

<p><a href="/1.2.x/health-checks-circuit-breakers/#active-health-checks">Active health checks</a> continue to execute for unhealthy
targets. Note that if active health checks are enabled and the probe detects
that the target is actually healthy, it will automatically re-enable it again.
To permanently remove a target from the ring-balancer, you should <a href="#delete-target">delete a
target</a> instead.</p>

<div class="endpoint post">/upstreams/{upstream name or id}/targets/{target or id}/unhealthy</div>

<table>
  <thead>
    <tr>
      <th style="text-align: right">Attributes</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right"><code>upstream name or id</code><br><strong>required</strong></td>
      <td>The unique identifier <strong>or</strong> the name of the upstream.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>target or id</code><br><strong>required</strong></td>
      <td>The host/port combination element of the target to set as unhealthy, or the <code>id</code> of an existing target entry.</td>
    </tr>
  </tbody>
</table>

<p><em>Response</em></p>

<div><div class="highlight"><pre class="highlight"><code>HTTP 204 No Content
</code></pre></div></div>

<hr>

<h3 id="list-all-targets"><a class="header-link" href="#list-all-targets" title="Permalink"><span class="sr-only">Permalink</span><i class="fa fa-link"></i></a>List All Targets</h3>

<p>Lists all targets of the upstream. Multiple target objects for the same
target may be returned, showing the history of changes for a specific target.
The target object with the latest <code>created_at</code> is the current definition.</p>

<div class="endpoint get">/upstreams/{name or id}/targets/all/</div>

<table>
  <thead>
    <tr>
      <th style="text-align: right">Attributes</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right"><code>name or id</code><br><strong>required</strong></td>
      <td>The unique identifier <strong>or</strong> the name of the upstream for which to list the targets.</td>
    </tr>
  </tbody>
</table>

<p><em>Response</em></p>

<div><div class="highlight"><pre class="highlight"><code>HTTP 200 OK
</code></pre></div></div>

<div><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1485524883980</span><span class="p">,</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"18c0ad90-f942-4098-88db-bbee3e43b27f"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"target"</span><span class="p">:</span><span class="w"> </span><span class="s2">"127.0.0.1:20000"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"upstream_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"07131005-ba30-4204-a29f-0927d53257b4"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"weight"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1485524914883</span><span class="p">,</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6c6f34eb-e6c3-4c1f-ac58-4060e5bca890"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"target"</span><span class="p">:</span><span class="w"> </span><span class="s2">"127.0.0.1:20002"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"upstream_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"07131005-ba30-4204-a29f-0927d53257b4"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"weight"</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<hr>



        </div>
      </div>


    </div>


  </body>


</html>
